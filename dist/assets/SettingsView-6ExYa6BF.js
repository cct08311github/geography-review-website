import{_ as Z,u as c}from"./_plugin-vue_export-helper-B9ryFmU6.js";import{m as h,e as ll,p as tl,c as el,w as t,g,r as u,o as ol,a as e,b as o,d as y,j as nl}from"./index-B84bSu74.js";const al={__name:"SettingsView",setup(ul){const J=c(),T=h(),N=g(""),O=g("國三"),b=g(!1),_=g(!0),S=g(!0),V=g(!0),D=g(!1),x=g(!1),w=g(!1),A=["國一","國二","國三"],M=nl(()=>J.progress.completedTopics.length>0||Object.keys(J.progress.quizScores).length>0);ll(()=>{P(),b.value=T.global.current.value.dark||!1}),tl([N,O,b,_,S,V],()=>{B(),R()},{deep:!0});const P=()=>{try{const a=localStorage.getItem("geographySettings");if(a){const l=JSON.parse(a);N.value=l.username||"",O.value=l.grade||"國三",b.value=l.darkMode||!1,_.value=l.soundEnabled!==!1,S.value=l.notificationsEnabled!==!1,V.value=l.autoSave!==!1}}catch(a){console.error("載入設定失敗:",a)}},B=()=>{try{const a={username:N.value,grade:O.value,darkMode:b.value,soundEnabled:_.value,notificationsEnabled:S.value,autoSave:V.value,savedAt:Date.now()};localStorage.setItem("geographySettings",JSON.stringify(a)),x.value=!0}catch(a){console.error("保存設定失敗:",a),w.value=!0}},R=()=>{T.global.name.value=b.value?"dark":"light"},F=()=>{try{const a=localStorage.getItem("geographyProgress"),l=localStorage.getItem("geographySettings"),n={progress:a?JSON.parse(a):{},settings:l?JSON.parse(l):{},exportedAt:new Date().toISOString(),version:"1.0.0"},m=JSON.stringify(n,null,2),U="data:application/json;charset=utf-8,"+encodeURIComponent(m),d=`地理學習數據_${new Date().toISOString().split("T")[0]}.json`,f=document.createElement("a");f.setAttribute("href",U),f.setAttribute("download",d),f.click(),x.value=!0}catch(a){console.error("匯出數據失敗:",a),w.value=!0}},$=()=>{const a=document.createElement("input");a.type="file",a.accept=".json",a.onchange=l=>{const n=l.target.files[0];if(!n)return;const m=new FileReader;m.onload=U=>{try{const d=JSON.parse(U.target.result);d.progress&&localStorage.setItem("geographyProgress",JSON.stringify(d.progress)),d.settings&&(localStorage.setItem("geographySettings",JSON.stringify(d.settings)),P()),x.value=!0,setTimeout(()=>{window.location.reload()},1e3)}catch(d){console.error("匯入數據失敗:",d),w.value=!0}},m.readAsText(n)},a.click()},q=()=>{D.value=!0},z=()=>{try{J.resetProgress(),D.value=!1,x.value=!0}catch(a){console.error("重置進度失敗:",a),w.value=!0}},G=()=>{window.open("https://github.com/your-username/geography-review-website","_blank")};return(a,l)=>{const n=u("v-icon"),m=u("v-card-title"),U=u("v-card-subtitle"),d=u("v-card"),f=u("v-col"),E=u("v-row"),r=u("v-list-item-title"),i=u("v-list-item-subtitle"),H=u("v-text-field"),p=u("v-list-item"),v=u("v-divider"),K=u("v-select"),I=u("v-list"),C=u("v-switch"),k=u("v-btn"),L=u("v-card-text"),Q=u("v-spacer"),W=u("v-card-actions"),X=u("v-dialog"),j=u("v-snackbar"),Y=u("v-container");return ol(),el(Y,{class:"pa-4"},{default:t(()=>[e(E,{class:"mb-4"},{default:t(()=>[e(f,{cols:"12"},{default:t(()=>[e(d,{color:"grey-darken-2",dark:"",class:"pa-4 rounded-lg"},{default:t(()=>[e(m,{class:"text-h4 font-weight-bold"},{default:t(()=>[e(n,{large:"",left:""},{default:t(()=>[...l[10]||(l[10]=[o("mdi-cog",-1)])]),_:1}),l[11]||(l[11]=o(" 設定 ",-1))]),_:1}),e(U,{class:"text-h6 mt-2"},{default:t(()=>[...l[12]||(l[12]=[o(" 個人化設定與應用程式選項 ",-1)])]),_:1})]),_:1})]),_:1})]),_:1}),e(E,{class:"mb-6"},{default:t(()=>[e(f,{cols:"12"},{default:t(()=>[e(d,{class:"pa-4"},{default:t(()=>[e(m,{class:"text-h5 mb-4"},{default:t(()=>[e(n,{left:"",color:"primary"},{default:t(()=>[...l[13]||(l[13]=[o("mdi-account-cog",-1)])]),_:1}),l[14]||(l[14]=o(" 個人設定 ",-1))]),_:1}),e(I,null,{default:t(()=>[e(p,null,{prepend:t(()=>[e(n,null,{default:t(()=>[...l[15]||(l[15]=[o("mdi-account",-1)])]),_:1})]),append:t(()=>[e(H,{modelValue:N.value,"onUpdate:modelValue":l[0]||(l[0]=s=>N.value=s),placeholder:"輸入使用者名稱",density:"compact","hide-details":"",style:{"max-width":"200px"}},null,8,["modelValue"])]),default:t(()=>[e(r,null,{default:t(()=>[...l[16]||(l[16]=[o("使用者名稱",-1)])]),_:1}),e(i,null,{default:t(()=>[...l[17]||(l[17]=[o("設定您的顯示名稱",-1)])]),_:1})]),_:1}),e(v,{class:"my-2"}),e(p,null,{prepend:t(()=>[e(n,null,{default:t(()=>[...l[18]||(l[18]=[o("mdi-school",-1)])]),_:1})]),append:t(()=>[e(K,{modelValue:O.value,"onUpdate:modelValue":l[1]||(l[1]=s=>O.value=s),items:A,density:"compact","hide-details":"",style:{"max-width":"150px"}},null,8,["modelValue"])]),default:t(()=>[e(r,null,{default:t(()=>[...l[19]||(l[19]=[o("年級",-1)])]),_:1}),e(i,null,{default:t(()=>[...l[20]||(l[20]=[o("選擇您的年級",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(E,{class:"mb-6"},{default:t(()=>[e(f,{cols:"12"},{default:t(()=>[e(d,{class:"pa-4"},{default:t(()=>[e(m,{class:"text-h5 mb-4"},{default:t(()=>[e(n,{left:"",color:"primary"},{default:t(()=>[...l[21]||(l[21]=[o("mdi-application-cog",-1)])]),_:1}),l[22]||(l[22]=o(" 應用程式設定 ",-1))]),_:1}),e(I,null,{default:t(()=>[e(p,null,{prepend:t(()=>[e(n,null,{default:t(()=>[...l[23]||(l[23]=[o("mdi-theme-light-dark",-1)])]),_:1})]),append:t(()=>[e(C,{modelValue:b.value,"onUpdate:modelValue":l[2]||(l[2]=s=>b.value=s),color:"primary","hide-details":"",label:b.value?"暗色":"亮色"},null,8,["modelValue","label"])]),default:t(()=>[e(r,null,{default:t(()=>[...l[24]||(l[24]=[o("主題模式",-1)])]),_:1}),e(i,null,{default:t(()=>[...l[25]||(l[25]=[o("選擇亮色或暗色主題",-1)])]),_:1})]),_:1}),e(v,{class:"my-2"}),e(p,null,{prepend:t(()=>[e(n,null,{default:t(()=>[...l[26]||(l[26]=[o("mdi-volume-high",-1)])]),_:1})]),append:t(()=>[e(C,{modelValue:_.value,"onUpdate:modelValue":l[3]||(l[3]=s=>_.value=s),color:"primary","hide-details":"",label:_.value?"開啟":"關閉"},null,8,["modelValue","label"])]),default:t(()=>[e(r,null,{default:t(()=>[...l[27]||(l[27]=[o("音效",-1)])]),_:1}),e(i,null,{default:t(()=>[...l[28]||(l[28]=[o("開啟或關閉音效",-1)])]),_:1})]),_:1}),e(v,{class:"my-2"}),e(p,null,{prepend:t(()=>[e(n,null,{default:t(()=>[...l[29]||(l[29]=[o("mdi-bell",-1)])]),_:1})]),append:t(()=>[e(C,{modelValue:S.value,"onUpdate:modelValue":l[4]||(l[4]=s=>S.value=s),color:"primary","hide-details":"",label:S.value?"開啟":"關閉"},null,8,["modelValue","label"])]),default:t(()=>[e(r,null,{default:t(()=>[...l[30]||(l[30]=[o("學習提醒",-1)])]),_:1}),e(i,null,{default:t(()=>[...l[31]||(l[31]=[o("每日學習提醒通知",-1)])]),_:1})]),_:1}),e(v,{class:"my-2"}),e(p,null,{prepend:t(()=>[e(n,null,{default:t(()=>[...l[32]||(l[32]=[o("mdi-autorenew",-1)])]),_:1})]),append:t(()=>[e(C,{modelValue:V.value,"onUpdate:modelValue":l[5]||(l[5]=s=>V.value=s),color:"primary","hide-details":"",label:V.value?"開啟":"關閉"},null,8,["modelValue","label"])]),default:t(()=>[e(r,null,{default:t(()=>[...l[33]||(l[33]=[o("自動保存",-1)])]),_:1}),e(i,null,{default:t(()=>[...l[34]||(l[34]=[o("自動保存學習進度",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(E,{class:"mb-6"},{default:t(()=>[e(f,{cols:"12"},{default:t(()=>[e(d,{class:"pa-4"},{default:t(()=>[e(m,{class:"text-h5 mb-4"},{default:t(()=>[e(n,{left:"",color:"primary"},{default:t(()=>[...l[35]||(l[35]=[o("mdi-database-cog",-1)])]),_:1}),l[36]||(l[36]=o(" 數據管理 ",-1))]),_:1}),e(I,null,{default:t(()=>[e(p,null,{prepend:t(()=>[e(n,null,{default:t(()=>[...l[37]||(l[37]=[o("mdi-download",-1)])]),_:1})]),append:t(()=>[e(k,{color:"primary",variant:"outlined",onClick:F,disabled:!M.value},{default:t(()=>[...l[40]||(l[40]=[o(" 匯出 ",-1)])]),_:1},8,["disabled"])]),default:t(()=>[e(r,null,{default:t(()=>[...l[38]||(l[38]=[o("匯出學習數據",-1)])]),_:1}),e(i,null,{default:t(()=>[...l[39]||(l[39]=[o("下載您的學習進度報告",-1)])]),_:1})]),_:1}),e(v,{class:"my-2"}),e(p,null,{prepend:t(()=>[e(n,null,{default:t(()=>[...l[41]||(l[41]=[o("mdi-upload",-1)])]),_:1})]),append:t(()=>[e(k,{color:"warning",variant:"outlined",onClick:$},{default:t(()=>[...l[44]||(l[44]=[o(" 匯入 ",-1)])]),_:1})]),default:t(()=>[e(r,null,{default:t(()=>[...l[42]||(l[42]=[o("匯入學習數據",-1)])]),_:1}),e(i,null,{default:t(()=>[...l[43]||(l[43]=[o("從檔案恢復學習進度",-1)])]),_:1})]),_:1}),e(v,{class:"my-2"}),e(p,null,{prepend:t(()=>[e(n,{color:"error"},{default:t(()=>[...l[45]||(l[45]=[o("mdi-delete",-1)])]),_:1})]),append:t(()=>[e(k,{color:"error",variant:"outlined",onClick:q},{default:t(()=>[...l[48]||(l[48]=[o(" 重置 ",-1)])]),_:1})]),default:t(()=>[e(r,null,{default:t(()=>[...l[46]||(l[46]=[o("重置學習進度",-1)])]),_:1}),e(i,null,{default:t(()=>[...l[47]||(l[47]=[o("清除所有學習數據，重新開始",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(E,null,{default:t(()=>[e(f,{cols:"12"},{default:t(()=>[e(d,{class:"pa-4"},{default:t(()=>[e(m,{class:"text-h5 mb-4"},{default:t(()=>[e(n,{left:"",color:"primary"},{default:t(()=>[...l[49]||(l[49]=[o("mdi-information",-1)])]),_:1}),l[50]||(l[50]=o(" 關於 ",-1))]),_:1}),e(I,null,{default:t(()=>[e(p,null,{prepend:t(()=>[e(n,null,{default:t(()=>[...l[51]||(l[51]=[o("mdi-cellphone",-1)])]),_:1})]),append:t(()=>[...l[54]||(l[54]=[y("span",{class:"text-body-2"},"v1.0.0",-1)])]),default:t(()=>[e(r,null,{default:t(()=>[...l[52]||(l[52]=[o("版本",-1)])]),_:1}),e(i,null,{default:t(()=>[...l[53]||(l[53]=[o("應用程式版本資訊",-1)])]),_:1})]),_:1}),e(v,{class:"my-2"}),e(p,null,{prepend:t(()=>[e(n,null,{default:t(()=>[...l[55]||(l[55]=[o("mdi-calendar",-1)])]),_:1})]),append:t(()=>[...l[58]||(l[58]=[y("span",{class:"text-body-2"},"2026年2月",-1)])]),default:t(()=>[e(r,null,{default:t(()=>[...l[56]||(l[56]=[o("最後更新",-1)])]),_:1}),e(i,null,{default:t(()=>[...l[57]||(l[57]=[o("內容最後更新時間",-1)])]),_:1})]),_:1}),e(v,{class:"my-2"}),e(p,null,{prepend:t(()=>[e(n,null,{default:t(()=>[...l[59]||(l[59]=[o("mdi-book-open-page-variant",-1)])]),_:1})]),append:t(()=>[...l[62]||(l[62]=[y("span",{class:"text-body-2"},"近5年會考重點",-1)])]),default:t(()=>[e(r,null,{default:t(()=>[...l[60]||(l[60]=[o("內容來源",-1)])]),_:1}),e(i,null,{default:t(()=>[...l[61]||(l[61]=[o("地理資料參考來源",-1)])]),_:1})]),_:1}),e(v,{class:"my-2"}),e(p,null,{prepend:t(()=>[e(n,null,{default:t(()=>[...l[63]||(l[63]=[o("mdi-github",-1)])]),_:1})]),append:t(()=>[e(k,{color:"secondary",variant:"text",onClick:G},{default:t(()=>[...l[66]||(l[66]=[o(" 查看原始碼 ",-1)])]),_:1})]),default:t(()=>[e(r,null,{default:t(()=>[...l[64]||(l[64]=[o("開源專案",-1)])]),_:1}),e(i,null,{default:t(()=>[...l[65]||(l[65]=[o("專案原始碼",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(X,{modelValue:D.value,"onUpdate:modelValue":l[7]||(l[7]=s=>D.value=s),"max-width":"400"},{default:t(()=>[e(d,null,{default:t(()=>[e(m,{class:"text-h5"},{default:t(()=>[...l[67]||(l[67]=[o("確認重置",-1)])]),_:1}),e(L,null,{default:t(()=>[...l[68]||(l[68]=[o(" 您確定要重置所有學習進度嗎？此操作將： ",-1),y("ul",{class:"mt-2"},[y("li",null,"清除所有已完成的主題"),y("li",null,"刪除所有測驗成績"),y("li",null,"重置學習時間統計")],-1),y("strong",{class:"text-error"},"此操作無法復原！",-1)])]),_:1}),e(W,null,{default:t(()=>[e(Q),e(k,{color:"grey",onClick:l[6]||(l[6]=s=>D.value=!1)},{default:t(()=>[...l[69]||(l[69]=[o("取消",-1)])]),_:1}),e(k,{color:"error",onClick:z},{default:t(()=>[...l[70]||(l[70]=[o("確認重置",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(j,{modelValue:x.value,"onUpdate:modelValue":l[8]||(l[8]=s=>x.value=s),color:"success",timeout:"3000"},{default:t(()=>[...l[71]||(l[71]=[o(" 設定已保存！ ",-1)])]),_:1},8,["modelValue"]),e(j,{modelValue:w.value,"onUpdate:modelValue":l[9]||(l[9]=s=>w.value=s),color:"error",timeout:"3000"},{default:t(()=>[...l[72]||(l[72]=[o(" 操作失敗，請重試。 ",-1)])]),_:1},8,["modelValue"])]),_:1})}}},rl=Z(al,[["__scopeId","data-v-495d5226"]]);export{rl as default};
