import{u as oe}from"./progress-CqnHXEfv.js";import{t as se,a as ae}from"./taiwan-geography-CPnPTjtf.js";import{_ as ne}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{H as re,a0 as de,a6 as x,a9 as t,h as M,a5 as r,a8 as i,n as l,Z as s,ae as f,F as C,af as S,V as a,o as u,j}from"./vendor-TecACWjj.js";const ie={key:1},ue={class:"mt-2"},ce={class:"text-h6 mb-2"},me=["innerHTML"],_e={class:"mt-4"},fe={class:"text-right"},ve={class:"text-center"},pe={class:"text-h3 font-weight-bold"},ge={class:"text-center mt-4"},be={class:"text-caption"},ke={class:"mt-4"},ye={__name:"StudyView",setup(we){const k=oe(),p=M(1),$=M(0),_=M(!1);let y=null;const P=M(se),B=j(()=>k.progress.completedTopics.length*3),L=j(()=>ae*3),H=j(()=>B.value/L.value*100),m=n=>k.progress.completedTopics.includes(n),N=n=>{const e=parseInt(n.split("-")[0]);return m(e)},h=n=>n.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\n/g,"<br>").replace(/- \*\*(.*?)\*\*/g,"<li><strong>$1</strong></li>").replace(/- (.*?)(?=\n|$)/g,"<li>$1</li>").replace(/\d+\.\s+\*\*(.*?)\*\*/g,"<li><strong>$1</strong></li>").replace(/\d+\.\s+(.*?)(?=\n|$)/g,"<li>$1</li>"),F=n=>["grey","green","blue","orange","red"][n-1]||"grey",R=()=>{_.value||(_.value=!0,y=setInterval(()=>{$.value++},1e3))},q=()=>{if(_.value){_.value=!1,clearInterval(y);const n=Math.floor($.value/60);n>0&&k.addStudyTime(n)}},D=()=>{$.value=0,_.value&&(clearInterval(y),_.value=!1)},E=n=>{const e=Math.floor(n/60),d=n%60;return`${e.toString().padStart(2,"0")}:${d.toString().padStart(2,"0")}`},G=n=>{m(n)||k.completeTopic(n)},Z=(n,e)=>{m(e)||k.completeTopic(e)};return re(()=>{const e=new URLSearchParams(window.location.search).get("topic");if(e&&!isNaN(e)){const d=parseInt(e);P.value.some(v=>v.id===d)&&(p.value=d)}}),de(()=>{y&&clearInterval(y)}),(n,e)=>{const d=r("v-icon"),v=r("v-card-title"),U=r("v-card-subtitle"),g=r("v-card"),w=r("v-col"),V=r("v-row"),A=r("v-badge"),J=r("v-tab"),K=r("v-tabs"),I=r("v-chip"),O=r("v-alert-title"),Q=r("v-alert"),W=r("v-divider"),b=r("v-btn"),X=r("v-card-actions"),Y=r("v-window-item"),ee=r("v-window"),z=r("v-card-text"),te=r("v-progress-linear"),le=r("v-container");return i(),x(le,{class:"pa-4"},{default:t(()=>[l(V,{class:"mb-4"},{default:t(()=>[l(w,{cols:"12"},{default:t(()=>[l(g,{color:"blue-darken-2",dark:"",class:"pa-4 rounded-lg"},{default:t(()=>[l(v,{class:"text-h4 font-weight-bold"},{default:t(()=>[l(d,{large:"",left:""},{default:t(()=>[...e[3]||(e[3]=[s("mdi-book-open-page-variant",-1)])]),_:1}),e[4]||(e[4]=s(" 學習中心 ",-1))]),_:1}),l(U,{class:"text-h6 mt-2"},{default:t(()=>[...e[5]||(e[5]=[s(" 台灣地理會考重點整理 - 近5年考試重點精選 ",-1)])]),_:1})]),_:1})]),_:1})]),_:1}),l(V,{class:"mb-6"},{default:t(()=>[l(w,{cols:"12"},{default:t(()=>[l(g,{class:"pa-4"},{default:t(()=>[l(v,{class:"text-h5 mb-4"},{default:t(()=>[l(d,{left:"",color:"primary"},{default:t(()=>[...e[6]||(e[6]=[s("mdi-format-list-bulleted",-1)])]),_:1}),e[7]||(e[7]=s(" 選擇學習主題 ",-1))]),_:1}),l(K,{modelValue:p.value,"onUpdate:modelValue":e[0]||(e[0]=o=>p.value=o),color:"primary",grow:""},{default:t(()=>[(i(!0),f(C,null,S(P.value,o=>(i(),x(J,{key:o.id,value:o.id},{default:t(()=>[o.lastTested.length>0?(i(),x(A,{key:0,content:o.lastTested.length,color:"red"},{default:t(()=>[s(a(o.emoji)+" "+a(o.title),1)]),_:2},1032,["content"])):(i(),f("span",ie,a(o.emoji)+" "+a(o.title),1))]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(V,null,{default:t(()=>[l(w,{cols:"12"},{default:t(()=>[l(ee,{modelValue:p.value,"onUpdate:modelValue":e[1]||(e[1]=o=>p.value=o)},{default:t(()=>[(i(!0),f(C,null,S(P.value,o=>(i(),x(Y,{key:o.id,value:o.id},{default:t(()=>[l(g,{class:"pa-4 mb-4"},{default:t(()=>[l(v,{class:"text-h5 mb-2"},{default:t(()=>[s(a(o.emoji)+" "+a(o.title),1)]),_:2},1024),l(U,{class:"mb-4"},{default:t(()=>[l(I,{color:"primary",variant:"outlined",class:"mr-2"},{default:t(()=>[l(d,{left:"",small:""},{default:t(()=>[...e[8]||(e[8]=[s("mdi-calendar",-1)])]),_:1}),s(" 近5年考過 "+a(o.lastTested.length)+" 次 ",1)]),_:2},1024),l(I,{color:F(o.importance),variant:"outlined",class:"mr-2"},{default:t(()=>[l(d,{left:"",small:""},{default:t(()=>[...e[9]||(e[9]=[s("mdi-flag",-1)])]),_:1}),s(" 重要性："+a("★".repeat(o.importance)),1)]),_:2},1032,["color"]),l(I,{color:m(o.id)?"success":"grey",variant:"outlined"},{default:t(()=>[l(d,{left:"",small:""},{default:t(()=>[s(a(m(o.id)?"mdi-check-circle":"mdi-circle-outline"),1)]),_:2},1024),s(" "+a(m(o.id)?"已完成":"未學習"),1)]),_:2},1032,["color"])]),_:2},1024),l(Q,{type:"info",variant:"tonal",class:"mb-4"},{default:t(()=>[l(O,null,{default:t(()=>[...e[10]||(e[10]=[s("會考提示",-1)])]),_:1}),u("ul",ue,[(i(!0),f(C,null,S(o.examTips,(c,T)=>(i(),f("li",{key:T},a(c),1))),128))])]),_:2},1024),(i(!0),f(C,null,S(o.sections,c=>(i(),f("div",{key:c.id,class:"mb-6"},[l(W,{class:"my-4"}),u("h3",ce,a(c.title),1),l(g,{variant:"outlined",class:"pa-4 mb-2"},{default:t(()=>[u("div",{class:"markdown-content",innerHTML:h(c.content)},null,8,me),u("div",_e,[(i(!0),f(C,null,S(c.keywords,T=>(i(),x(I,{key:T,size:"small",class:"mr-1 mb-1"},{default:t(()=>[s(a(T),1)]),_:2},1024))),128))])]),_:2},1024),u("div",fe,[l(b,{color:N(c.id)?"success":"primary",onClick:T=>Z(c.id,o.id),size:"small"},{default:t(()=>[l(d,{left:""},{default:t(()=>[s(a(N(c.id)?"mdi-check":"mdi-bookmark"),1)]),_:2},1024),s(" "+a(N(c.id)?"已學習":"標記為已學習"),1)]),_:2},1032,["color","onClick"])])]))),128)),l(X,{class:"mt-6"},{default:t(()=>[l(b,{color:m(o.id)?"success":"primary",onClick:c=>G(o.id),size:"large",block:""},{default:t(()=>[l(d,{left:""},{default:t(()=>[s(a(m(o.id)?"mdi-check-circle":"mdi-check-circle-outline"),1)]),_:2},1024),s(" "+a(m(o.id)?"已完成此主題":"完成此主題學習"),1)]),_:2},1032,["color","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(V,{class:"mt-6"},{default:t(()=>[l(w,{cols:"12",md:"6"},{default:t(()=>[l(g,{class:"pa-4",color:"blue-lighten-5"},{default:t(()=>[l(v,{class:"text-h6"},{default:t(()=>[l(d,{left:"",color:"blue"},{default:t(()=>[...e[11]||(e[11]=[s("mdi-timer",-1)])]),_:1}),e[12]||(e[12]=s(" 學習計時器 ",-1))]),_:1}),l(z,null,{default:t(()=>[u("div",ve,[u("div",pe,a(E($.value)),1),e[13]||(e[13]=u("div",{class:"text-caption mt-2"},"本次學習時間",-1))]),u("div",ge,[l(b,{color:"blue",onClick:R,disabled:_.value,class:"mr-2"},{default:t(()=>[l(d,{left:""},{default:t(()=>[...e[14]||(e[14]=[s("mdi-play",-1)])]),_:1}),e[15]||(e[15]=s(" 開始 ",-1))]),_:1},8,["disabled"]),l(b,{color:"red",onClick:q,disabled:!_.value,class:"mr-2"},{default:t(()=>[l(d,{left:""},{default:t(()=>[...e[16]||(e[16]=[s("mdi-stop",-1)])]),_:1}),e[17]||(e[17]=s(" 停止 ",-1))]),_:1},8,["disabled"]),l(b,{color:"grey",onClick:D},{default:t(()=>[l(d,{left:""},{default:t(()=>[...e[18]||(e[18]=[s("mdi-refresh",-1)])]),_:1}),e[19]||(e[19]=s(" 重置 ",-1))]),_:1})])]),_:1})]),_:1})]),_:1}),l(w,{cols:"12",md:"6"},{default:t(()=>[l(g,{class:"pa-4",color:"green-lighten-5"},{default:t(()=>[l(v,{class:"text-h6"},{default:t(()=>[l(d,{left:"",color:"green"},{default:t(()=>[...e[20]||(e[20]=[s("mdi-chart-line",-1)])]),_:1}),e[21]||(e[21]=s(" 學習進度 ",-1))]),_:1}),l(z,null,{default:t(()=>[l(te,{"model-value":H.value,height:"20",color:"green",rounded:"",class:"mb-2"},{default:t(({value:o})=>[u("strong",null,a(Math.round(o))+"%",1)]),_:1},8,["model-value"]),u("div",be,"已完成 "+a(B.value)+" / "+a(L.value)+" 個章節",1),u("div",ke,[l(b,{color:"green",onClick:e[2]||(e[2]=o=>n.$router.push({name:"practice",query:{topic:p.value}})),block:""},{default:t(()=>[l(d,{left:""},{default:t(()=>[...e[22]||(e[22]=[s("mdi-check-circle",-1)])]),_:1}),e[23]||(e[23]=s(" 進行主題測驗 ",-1))]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},$e=ne(ye,[["__scopeId","data-v-9c554153"]]);export{$e as default};
