import{y as Ve,a6 as m,a9 as t,a5 as c,a7 as ze,a8 as r,n as l,Z as o,V as u,ae as S,F as U,af as G,M as W,o as d,ag as p,j as v,h as N}from"./vendor-TecACWjj.js";import{a as Qe}from"./subjects-Dq9uhs1s.js";import{u as Ie,a as Ne,g as Pe}from"./practice.store-BMSW6Ij-.js";import{_ as $e}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./quizzes-BRUEq-FN.js";const Ae={class:"mb-2"},Be={class:"mb-2"},Te={class:"mb-2"},he={class:"text-center text-white font-weight-bold"},qe={class:"text-h6 mb-6"},Le={key:0,class:"text-h6"},De={key:1,class:"text-h6"},Ee={class:"text-body-1 mt-2"},Me={key:0,class:"mt-4"},Re={class:"text-body-2"},Fe={key:0},He={key:1},Ue=["color"],Ge={class:"text-h6 mt-2"},We={class:"d-flex justify-center gap-4 flex-wrap"},Ze={__name:"SubjectPracticeView",props:{subjectId:{type:Number,required:!0}},setup(ee){const q=ee,Z=ze(),i=Ie();Ne();const j=N(null),P=N([]),Q=N(!1),$=N(null),J=N("quick"),K=N(null),V=v(()=>{const s=Number(q.subjectId);return Qe(s)}),L=v(()=>{var s;return((s=V.value)==null?void 0:s.name)||"æœªçŸ¥ç§‘ç›®"}),f=v(()=>{var s;return((s=V.value)==null?void 0:s.color)||"#9E9E9E"}),te=v(()=>{var s;return((s=V.value)==null?void 0:s.icon)||"mdi-help-circle"}),le=v(()=>{var s;return((s=V.value)==null?void 0:s.description)||""}),oe=v(()=>{var s;return((s=V.value)==null?void 0:s.topics)||[]}),F=v(()=>!!i.currentSession),D=v(()=>i.currentSession===null&&i.sessionHistory.length>0),a=v(()=>i.currentSession?i.currentQuestion:null),se=v(()=>i.currentSession?i.currentSession.currentQuestionIndex:0),ae=v(()=>i.currentSession?i.currentSession.questions.length:0),re=v(()=>i.progress),ue=v(()=>i.hasNextQuestion),A=v(()=>i.sessionHistory.length?i.sessionHistory[0]:null),B=v(()=>A.value?Pe(A.value.score):{label:"",color:"grey"}),O=v(()=>i.getWrongQuestions(q.subjectId).length),ne=v(()=>a.value?a.value.type==="multiple"?P.value.length>0:j.value!==null:!1),E=async(s,e=null)=>{J.value=s,K.value=e;let g=10;s==="comprehensive"&&(g=20);try{await i.startPracticeSession({subjectId:Number(q.subjectId),mode:s,topicId:e,questionCount:g}),M()}catch(b){console.error("é–‹å§‹ç·´ç¿’å¤±æ•—:",b),alert("é–‹å§‹ç·´ç¿’å¤±æ•—: "+b.message)}},ie=async()=>{if(!a.value||Q.value)return;let s=j.value;a.value.type==="multiple"&&(s=[...P.value]);try{const e=await i.submitAnswer(a.value.id,s);$.value=e,Q.value=!0}catch(e){console.error("æäº¤ç­”æ¡ˆå¤±æ•—:",e)}},ce=()=>{i.nextQuestion(),M()},de=async()=>{try{await i.endPracticeSession(),M()}catch(s){console.error("çµæŸç·´ç¿’å¤±æ•—:",s)}},ve=()=>{E(J.value,K.value)},fe=()=>{Z.push({name:"new-practice"})},X=()=>{i.currentSession=null,M()},me=()=>{Z.push({name:"home"})},M=()=>{j.value=null,P.value=[],Q.value=!1,$.value=null},pe=s=>({single:"å–®é¸é¡Œ",multiple:"å¤šé¸é¡Œ",truefalse:"åˆ¤æ–·é¡Œ",matching:"é…å°é¡Œ"})[s]||"ç·´ç¿’é¡Œ",_e=s=>({easy:"ç°¡å–®",medium:"ä¸­ç­‰",hard:"å›°é›£"})[s]||"",ge=s=>({easy:"green",medium:"orange",hard:"red"})[s]||"grey",be=()=>{var s;switch((s=V.value)==null?void 0:s.code){case"chinese":return"æ³¨é‡å­—éŸ³å­—å½¢ã€è©èªæˆèªçš„ç©ç´¯ï¼Œå¤šé–±è®€æ–‡è¨€æ–‡å’Œç™½è©±æ–‡ï¼Œæé«˜é–±è®€ç†è§£èƒ½åŠ›ã€‚";case"english":return"åŠ å¼·å–®å­—è¨˜æ†¶å’Œæ–‡æ³•ç·´ç¿’ï¼Œå¤šè½è‹±èªå°è©±ï¼ŒåŸ¹é¤Šèªæ„Ÿå’Œè½åŠ›ç†è§£èƒ½åŠ›ã€‚";case"math":return"æŒæ¡åŸºæœ¬å…¬å¼å’Œå®šç†ï¼Œå¤šåšé¡Œç›®ç·´ç¿’ï¼ŒåŸ¹é¤Šé‚è¼¯æ€ç¶­å’Œè§£é¡ŒæŠ€å·§ã€‚";case"science":return"ç†è§£ç§‘å­¸åŸç†å’Œæ¦‚å¿µï¼Œæ³¨é‡å¯¦é©—æ“ä½œå’Œè§€å¯Ÿï¼ŒåŸ¹é¤Šç§‘å­¸æ¢ç©¶èƒ½åŠ›ã€‚";case"social":return"æŒæ¡åœ°ç†ã€æ­·å²ã€å…¬æ°‘çš„åŸºæœ¬çŸ¥è­˜ï¼Œæ³¨é‡æ™‚äº‹åˆ†æå’Œç¤¾æœƒç¾è±¡ç†è§£ã€‚";default:return"ç³»çµ±åŒ–å­¸ç¿’ï¼Œæ³¨é‡åŸºç¤çŸ¥è­˜çš„æŒæ¡å’Œæ‡‰ç”¨èƒ½åŠ›çš„åŸ¹é¤Šã€‚"}},ye=()=>{var s;switch((s=V.value)==null?void 0:s.code){case"chinese":return"åœ‹æ–‡è€ƒè©¦æ™‚é–“70åˆ†é˜ï¼Œå»ºè­°å‰45é¡Œç”¨50åˆ†é˜ï¼Œä½œæ–‡ç”¨20åˆ†é˜ã€‚";case"english":return"è‹±èªè€ƒè©¦æ™‚é–“60åˆ†é˜ï¼Œè½åŠ›éƒ¨åˆ†è¦å°ˆæ³¨ï¼Œé–±è®€éƒ¨åˆ†è¦å¿«é€Ÿç€è¦½ã€‚";case"math":return"æ•¸å­¸è€ƒè©¦æ™‚é–“80åˆ†é˜ï¼Œå…ˆåšæœƒåšçš„é¡Œç›®ï¼Œé›£é¡Œç•™åˆ°æœ€å¾Œã€‚";case"science":return"è‡ªç„¶ç§‘è€ƒè©¦æ™‚é–“70åˆ†é˜ï¼Œæ³¨æ„åœ–è¡¨åˆ†æå’Œå¯¦é©—æ•¸æ“šè§£è®€ã€‚";case"social":return"ç¤¾æœƒç§‘è€ƒè©¦æ™‚é–“70åˆ†é˜ï¼Œåœ°ç†ã€æ­·å²ã€å…¬æ°‘é¡Œç›®è¦å‡è¡¡åˆ†é…æ™‚é–“ã€‚";default:return"åˆç†åˆ†é…æ™‚é–“ï¼Œå…ˆæ˜“å¾Œé›£ï¼Œæª¢æŸ¥ç­”æ¡ˆæ™‚è¦ä»”ç´°ã€‚"}};return Ve(()=>q.subjectId,()=>{X()}),(s,e)=>{const g=c("v-icon"),b=c("v-card-title"),R=c("v-card-subtitle"),k=c("v-card"),C=c("v-col"),I=c("v-row"),x=c("v-chip"),z=c("v-card-text"),y=c("v-btn"),T=c("v-card-actions"),ke=c("v-progress-linear"),H=c("v-radio"),Y=c("v-radio-group"),xe=c("v-checkbox"),we=c("v-spacer"),h=c("v-alert"),Ce=c("v-expand-transition"),Se=c("v-divider"),je=c("v-container");return r(),m(je,{class:"pa-4"},{default:t(()=>[l(I,{class:"mb-4"},{default:t(()=>[l(C,{cols:"12"},{default:t(()=>[l(k,{color:f.value,dark:"",class:"pa-4 rounded-lg"},{default:t(()=>[l(b,{class:"text-h4 font-weight-bold"},{default:t(()=>[l(g,{large:"",left:""},{default:t(()=>[o(u(te.value),1)]),_:1}),o(" "+u(L.value)+" - ç§‘ç›®ç·´ç¿’ ",1)]),_:1}),l(R,{class:"text-h6 mt-2"},{default:t(()=>[o(u(le.value),1)]),_:1})]),_:1},8,["color"])]),_:1})]),_:1}),!F.value&&!D.value?(r(),m(I,{key:0,class:"mb-6"},{default:t(()=>[l(C,{cols:"12"},{default:t(()=>[l(k,{class:"pa-4"},{default:t(()=>[l(b,{class:"text-h5 mb-4"},{default:t(()=>[l(g,{left:"",color:f.value},{default:t(()=>[...e[5]||(e[5]=[o("mdi-format-list-checks",-1)])]),_:1},8,["color"]),e[6]||(e[6]=o(" é¸æ“‡ç·´ç¿’æ¨¡å¼ ",-1))]),_:1}),l(I,null,{default:t(()=>[(r(!0),S(U,null,G(oe.value,n=>(r(),m(C,{cols:"12",md:"6",lg:"4",key:n.id},{default:t(()=>[l(k,{class:"pa-4 h-100",style:W({borderLeft:`4px solid ${f.value}`}),hover:"",onClick:_=>E("topic",n.id)},{default:t(()=>[l(b,{class:"text-h6"},{default:t(()=>[o(u(n.name),1)]),_:2},1024),l(R,{class:"mb-2"},{default:t(()=>[o(u(n.description),1)]),_:2},1024),l(z,null,{default:t(()=>[d("div",Ae,[l(x,{size:"small",class:"mr-1"},{default:t(()=>[...e[7]||(e[7]=[o("20-30é¡Œ",-1)])]),_:1}),l(x,{size:"small"},{default:t(()=>[...e[8]||(e[8]=[o("éš¨æ©Ÿå‡ºé¡Œ",-1)])]),_:1})])]),_:1}),l(T,null,{default:t(()=>[l(y,{color:f.value,block:""},{default:t(()=>[...e[9]||(e[9]=[o(" é–‹å§‹ç·´ç¿’ ",-1)])]),_:1},8,["color"])]),_:1})]),_:2},1032,["style","onClick"])]),_:2},1024))),128)),l(C,{cols:"12",md:"6",lg:"4"},{default:t(()=>[l(k,{class:"pa-4 h-100",style:W({borderLeft:`4px solid ${f.value}`}),color:"green-lighten-5",hover:"",onClick:e[0]||(e[0]=n=>E("comprehensive"))},{default:t(()=>[l(b,{class:"text-h6"},{default:t(()=>[l(g,{left:"",color:"green"},{default:t(()=>[...e[10]||(e[10]=[o("mdi-clipboard-text",-1)])]),_:1}),e[11]||(e[11]=o(" ç¶œåˆæ¸¬é©— ",-1))]),_:1}),l(R,{class:"mb-2"},{default:t(()=>[...e[12]||(e[12]=[o(" æ¶µè“‹æ‰€æœ‰ä¸»é¡Œçš„å®Œæ•´æ¸¬é©— ",-1)])]),_:1}),l(z,null,{default:t(()=>[d("div",Be,[l(x,{size:"small",color:"green",class:"mr-1"},{default:t(()=>[...e[13]||(e[13]=[o("50é¡Œ",-1)])]),_:1}),l(x,{size:"small",color:"green"},{default:t(()=>[...e[14]||(e[14]=[o("60åˆ†é˜",-1)])]),_:1})]),d("p",null,"æ¸¬è©¦ä½ å°"+u(L.value)+"ç§‘ç›®çš„æ•´é«”æŒæ¡ç¨‹åº¦",1)]),_:1}),l(T,null,{default:t(()=>[l(y,{color:"green",block:""},{default:t(()=>[...e[15]||(e[15]=[o(" é–‹å§‹æ¸¬é©— ",-1)])]),_:1})]),_:1})]),_:1},8,["style"])]),_:1}),l(C,{cols:"12",md:"6",lg:"4"},{default:t(()=>[l(k,{class:"pa-4 h-100",style:W({borderLeft:`4px solid ${f.value}`}),color:"orange-lighten-5",hover:"",onClick:e[1]||(e[1]=n=>E("quick"))},{default:t(()=>[l(b,{class:"text-h6"},{default:t(()=>[l(g,{left:"",color:"orange"},{default:t(()=>[...e[16]||(e[16]=[o("mdi-lightning-bolt",-1)])]),_:1}),e[17]||(e[17]=o(" å¿«é€Ÿç·´ç¿’ ",-1))]),_:1}),l(R,{class:"mb-2"},{default:t(()=>[...e[18]||(e[18]=[o(" 10é¡Œéš¨æ©Ÿç·´ç¿’ ",-1)])]),_:1}),l(z,null,{default:t(()=>[d("div",Te,[l(x,{size:"small",color:"orange",class:"mr-1"},{default:t(()=>[...e[19]||(e[19]=[o("10é¡Œ",-1)])]),_:1}),l(x,{size:"small",color:"orange"},{default:t(()=>[...e[20]||(e[20]=[o("15åˆ†é˜",-1)])]),_:1})]),e[21]||(e[21]=d("p",null,"é©åˆç¢ç‰‡æ™‚é–“çš„å¿«é€Ÿç·´ç¿’",-1))]),_:1}),l(T,null,{default:t(()=>[l(y,{color:"orange",block:""},{default:t(()=>[...e[22]||(e[22]=[o(" é–‹å§‹ç·´ç¿’ ",-1)])]),_:1})]),_:1})]),_:1},8,["style"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):p("",!0),F.value&&!D.value?(r(),m(I,{key:1},{default:t(()=>[l(C,{cols:"12"},{default:t(()=>[l(k,{class:"pa-4"},{default:t(()=>[l(ke,{"model-value":re.value,color:f.value,height:"20",rounded:"",class:"mb-4"},{default:t(({value:n})=>[d("div",he," ç¬¬ "+u(se.value+1)+" é¡Œ / å…± "+u(ae.value)+" é¡Œ ",1)]),_:1},8,["model-value","color"]),a.value?(r(),m(k,{key:0,class:"pa-6"},{default:t(()=>[l(b,{class:"text-h5 mb-4"},{default:t(()=>[l(x,{color:f.value,class:"mr-2"},{default:t(()=>[o(u(pe(a.value.type)),1)]),_:1},8,["color"]),a.value.difficulty?(r(),m(x,{key:0,color:ge(a.value.difficulty),size:"small"},{default:t(()=>[o(u(_e(a.value.difficulty)),1)]),_:1},8,["color"])):p("",!0)]),_:1}),l(z,null,{default:t(()=>[d("div",qe,u(a.value.question),1),a.value.type==="single"?(r(),m(Y,{key:0,modelValue:j.value,"onUpdate:modelValue":e[2]||(e[2]=n=>j.value=n)},{default:t(()=>[(r(!0),S(U,null,G(a.value.options,(n,_)=>(r(),m(H,{key:_,label:`${String.fromCharCode(65+_)}. ${n}`,value:_,color:f.value,class:"mb-2"},null,8,["label","value","color"]))),128))]),_:1},8,["modelValue"])):p("",!0),a.value.type==="truefalse"?(r(),m(Y,{key:1,modelValue:j.value,"onUpdate:modelValue":e[3]||(e[3]=n=>j.value=n)},{default:t(()=>[l(H,{label:"æ­£ç¢º (True)",value:!0,color:f.value,class:"mb-2"},null,8,["color"]),l(H,{label:"éŒ¯èª¤ (False)",value:!1,color:f.value},null,8,["color"])]),_:1},8,["modelValue"])):p("",!0),a.value.type==="multiple"?(r(!0),S(U,{key:2},G(a.value.options,(n,_)=>(r(),m(xe,{modelValue:P.value,"onUpdate:modelValue":e[4]||(e[4]=w=>P.value=w),key:_,label:`${String.fromCharCode(65+_)}. ${n}`,value:_,color:f.value,class:"mb-1"},null,8,["modelValue","label","value","color"]))),128)):p("",!0)]),_:1}),l(T,{class:"mt-4"},{default:t(()=>[Q.value?p("",!0):(r(),m(y,{key:0,color:f.value,size:"large",disabled:!ne.value,onClick:ie},{default:t(()=>[...e[23]||(e[23]=[o(" æäº¤ç­”æ¡ˆ ",-1)])]),_:1},8,["color","disabled"])),Q.value&&ue.value?(r(),m(y,{key:1,color:"primary",size:"large",onClick:ce},{default:t(()=>[...e[24]||(e[24]=[o(" ä¸‹ä¸€é¡Œ ",-1)])]),_:1})):p("",!0),l(we),l(y,{color:"error",variant:"text",onClick:de},{default:t(()=>[...e[25]||(e[25]=[o(" çµæŸç·´ç¿’ ",-1)])]),_:1})]),_:1}),l(Ce,null,{default:t(()=>[Q.value?(r(),m(z,{key:0,class:"mt-4 pa-4",color:"grey-lighten-4"},{default:t(()=>{var n,_;return[l(h,{type:(n=$.value)!=null&&n.isCorrect?"success":"error",class:"mb-4"},{default:t(()=>{var w;return[(w=$.value)!=null&&w.isCorrect?(r(),S("div",Le,"âœ… å›ç­”æ­£ç¢ºï¼")):(r(),S("div",De,"âŒ å›ç­”éŒ¯èª¤"))]}),_:1},8,["type"]),e[27]||(e[27]=d("div",{class:"text-body-1"},[d("strong",null,"è§£æï¼š")],-1)),d("div",Ee,u(a.value.explanation),1),(_=$.value)!=null&&_.isCorrect?p("",!0):(r(),S("div",Me,[d("div",Re,[e[26]||(e[26]=d("strong",null,"æ­£ç¢ºç­”æ¡ˆï¼š",-1)),a.value.type==="single"||a.value.type==="truefalse"?(r(),S("span",Fe,u(a.value.type==="truefalse"?a.value.answer?"æ­£ç¢º":"éŒ¯èª¤":String.fromCharCode(65+a.value.answer)),1)):a.value.type==="multiple"?(r(),S("span",He,u(a.value.answer.map(w=>String.fromCharCode(65+w)).join(", ")),1)):p("",!0)])]))]}),_:1})):p("",!0)]),_:1})]),_:1})):p("",!0)]),_:1})]),_:1})]),_:1})):p("",!0),D.value?(r(),m(I,{key:2},{default:t(()=>[l(C,{cols:"12",md:"8","offset-md":"2"},{default:t(()=>[l(k,{class:"pa-6 text-center"},{default:t(()=>[l(b,{class:"text-h4 mb-4"},{default:t(()=>[l(g,{size:"48",color:B.value.color,class:"mr-4"},{default:t(()=>[o(u(B.value.icon),1)]),_:1},8,["color"]),e[28]||(e[28]=o(" ç·´ç¿’å®Œæˆï¼ ",-1))]),_:1}),l(z,null,{default:t(()=>{var n,_,w;return[d("div",{class:"text-h2 font-weight-bold",color:B.value.color},u(((n=A.value)==null?void 0:n.score)||0)+"% ",9,Ue),d("div",Ge," æ­£ç¢º "+u(((_=A.value)==null?void 0:_.correctAnswers)||0)+" é¡Œ / å…± "+u(((w=A.value)==null?void 0:w.totalQuestions)||0)+" é¡Œ ",1),l(x,{color:B.value.color,size:"large",class:"mt-4"},{default:t(()=>[o(u(B.value.label),1)]),_:1},8,["color"]),l(Se,{class:"my-6"}),d("div",We,[l(y,{color:"primary",size:"large",onClick:ve},{default:t(()=>[l(g,{left:""},{default:t(()=>[...e[29]||(e[29]=[o("mdi-refresh",-1)])]),_:1}),e[30]||(e[30]=o(" å†ç·´ç¿’ä¸€æ¬¡ ",-1))]),_:1}),O.value>0?(r(),m(y,{key:0,color:"green",size:"large",onClick:fe},{default:t(()=>[l(g,{left:""},{default:t(()=>[...e[31]||(e[31]=[o("mdi-notebook",-1)])]),_:1}),o(" æŸ¥çœ‹éŒ¯é¡Œ ("+u(O.value)+") ",1)]),_:1})):p("",!0),l(y,{color:"orange",size:"large",onClick:X},{default:t(()=>[l(g,{left:""},{default:t(()=>[...e[32]||(e[32]=[o("mdi-arrow-left",-1)])]),_:1}),e[33]||(e[33]=o(" è¿”å›é¸æ“‡ ",-1))]),_:1})])]}),_:1})]),_:1})]),_:1})]),_:1})):p("",!0),!F.value&&!D.value?(r(),m(I,{key:3},{default:t(()=>[l(C,{cols:"12"},{default:t(()=>[l(k,{class:"pa-4"},{default:t(()=>[l(b,{class:"text-h5 mb-4"},{default:t(()=>[l(g,{left:"",color:f.value},{default:t(()=>[...e[34]||(e[34]=[o("mdi-lightbulb-on",-1)])]),_:1},8,["color"]),o(" "+u(L.value)+"å­¸ç¿’å»ºè­° ",1)]),_:1}),l(z,null,{default:t(()=>[l(h,{color:f.value,variant:"tonal",class:"mb-4"},{default:t(()=>[e[35]||(e[35]=d("strong",null,"ğŸ“š å­¸ç¿’é‡é»ï¼š",-1)),o(" "+u(be()),1)]),_:1},8,["color"]),l(h,{type:"info",variant:"tonal",class:"mb-4"},{default:t(()=>[e[36]||(e[36]=d("strong",null,"â° æ™‚é–“åˆ†é…ï¼š",-1)),o(" å»ºè­°æ¯å¤©èŠ±30åˆ†é˜å°ˆæ³¨ç·´ç¿’"+u(L.value)+"ï¼Œæ•ˆæœæ¯”é€±æœ«ä¸€æ¬¡ç·´ç¿’3å°æ™‚æ›´å¥½ï¼ ",1)]),_:1}),l(h,{type:"success",variant:"tonal",class:"mb-4"},{default:t(()=>[...e[37]||(e[37]=[d("strong",null,"ğŸ“ éŒ¯é¡Œç®¡ç†ï¼š",-1),o(" ç³»çµ±æœƒè‡ªå‹•è¨˜éŒ„ä½ çš„éŒ¯é¡Œï¼Œå®šæœŸè¤‡ç¿’éŒ¯é¡Œæœ¬æ˜¯æé«˜æˆç¸¾çš„é—œéµï¼ ",-1)])]),_:1}),l(h,{type:"warning",variant:"tonal"},{default:t(()=>[e[38]||(e[38]=d("strong",null,"ğŸ¯ è€ƒè©¦ç­–ç•¥ï¼š",-1)),o(" "+u(ye()),1)]),_:1})]),_:1}),l(T,null,{default:t(()=>[l(y,{color:f.value,onClick:me},{default:t(()=>[l(g,{left:""},{default:t(()=>[...e[39]||(e[39]=[o("mdi-arrow-left",-1)])]),_:1}),e[40]||(e[40]=o(" è¿”å›ç§‘ç›®é¸æ“‡ ",-1))]),_:1},8,["color"])]),_:1})]),_:1})]),_:1})]),_:1})):p("",!0)]),_:1})}}},et=$e(Ze,[["__scopeId","data-v-672e3eb7"]]);export{et as default};
