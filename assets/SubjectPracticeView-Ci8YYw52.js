import{y as ze,a6 as m,a9 as t,a5 as i,a7 as Qe,a8 as r,n as l,Z as o,V as u,ae as S,F as W,af as Z,M as J,o as c,ag as p,j as d,h as I}from"./vendor-TecACWjj.js";import{a as Ie}from"./subjects-Dq9uhs1s.js";import{u as Ne,a as Pe,g as $e}from"./practice.store-Bur6BT5V.js";import{_ as Ae}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./quizzes-BRUEq-FN.js";const Be={class:"mb-2"},Te={class:"mb-2"},he={class:"mb-2"},qe={class:"text-center text-white font-weight-bold"},Le={class:"text-h6 mb-6"},De={key:0,class:"text-h6"},Ee={key:1,class:"text-h6"},Me={class:"text-body-1 mt-2"},Re={key:0,class:"mt-4"},Fe={class:"text-body-2"},Ue={key:0},Ge={key:1},He=["color"],We={class:"text-h6 mt-2"},Ze={class:"d-flex justify-center gap-4 flex-wrap"},Je={__name:"SubjectPracticeView",props:{subjectId:{type:Number,required:!0}},setup(te){const D=te,U=Qe(),v=Ne();Pe();const j=I(null),A=I([]),N=I(!1),B=I(null),K=I("quick"),O=I(null),P=I("select"),V=d(()=>{const s=Number(D.subjectId);return Ie(s)}),E=d(()=>{var s;return((s=V.value)==null?void 0:s.name)||"æœªçŸ¥ç§‘ç›®"}),f=d(()=>{var s;return((s=V.value)==null?void 0:s.color)||"#9E9E9E"}),le=d(()=>{var s;return((s=V.value)==null?void 0:s.icon)||"mdi-help-circle"}),oe=d(()=>{var s;return((s=V.value)==null?void 0:s.description)||""}),se=d(()=>{var s;return((s=V.value)==null?void 0:s.topics)||[]}),G=d(()=>P.value==="practice"),M=d(()=>P.value==="result"),a=d(()=>v.currentSession?v.currentQuestion:null),ae=d(()=>v.currentSession?v.currentSession.currentQuestionIndex:0),re=d(()=>v.currentSession?v.currentSession.questions.length:0),ue=d(()=>v.progress),ne=d(()=>v.hasNextQuestion),T=d(()=>v.sessionHistory.length?v.sessionHistory[0]:null),h=d(()=>T.value?$e(T.value.score):{label:"",color:"grey"}),X=d(()=>v.getWrongQuestions(D.subjectId).length),ie=d(()=>a.value?a.value.type==="multiple"?A.value.length>0:j.value!==null:!1),R=async(s,e=null)=>{K.value=s,O.value=e;let g=10,b=s;s==="comprehensive"&&(g=50,b="exam");try{if(await v.startPracticeSession({subjectId:Number(D.subjectId),mode:b,topicId:e,questionCount:g}),b==="exam"){U.push({name:"exam-taking"});return}P.value="practice",F()}catch(z){console.error("é–‹å§‹ç·´ç¿’å¤±æ•—:",z),alert("é–‹å§‹ç·´ç¿’å¤±æ•—: "+z.message)}},ce=async()=>{if(!a.value||N.value)return;let s=j.value;a.value.type==="multiple"&&(s=[...A.value]);try{const e=await v.submitAnswer(a.value.id,s);B.value=e,N.value=!0}catch(e){console.error("æäº¤ç­”æ¡ˆå¤±æ•—:",e)}},de=()=>{v.nextQuestion(),F()},ve=async()=>{try{await v.endPracticeSession(),F(),P.value="result"}catch(s){console.error("çµæŸç·´ç¿’å¤±æ•—:",s)}},fe=()=>{R(K.value,O.value)},me=()=>{U.push({name:"wrong-answers"})},Y=()=>{v.currentSession=null,F(),P.value="select"},pe=()=>{U.push({name:"home"})},F=()=>{j.value=null,A.value=[],N.value=!1,B.value=null},_e=s=>({single:"å–®é¸é¡Œ",multiple:"å¤šé¸é¡Œ",truefalse:"åˆ¤æ–·é¡Œ",matching:"é…å°é¡Œ"})[s]||"ç·´ç¿’é¡Œ",ge=s=>({easy:"ç°¡å–®",medium:"ä¸­ç­‰",hard:"å›°é›£"})[s]||"",be=s=>({easy:"green",medium:"orange",hard:"red"})[s]||"grey",ye=()=>{var s;switch((s=V.value)==null?void 0:s.code){case"chinese":return"æ³¨é‡å­—éŸ³å­—å½¢ã€è©èªæˆèªçš„ç©ç´¯ï¼Œå¤šé–±è®€æ–‡è¨€æ–‡å’Œç™½è©±æ–‡ï¼Œæé«˜é–±è®€ç†è§£èƒ½åŠ›ã€‚";case"english":return"åŠ å¼·å–®å­—è¨˜æ†¶å’Œæ–‡æ³•ç·´ç¿’ï¼Œå¤šè½è‹±èªå°è©±ï¼ŒåŸ¹é¤Šèªæ„Ÿå’Œè½åŠ›ç†è§£èƒ½åŠ›ã€‚";case"math":return"æŒæ¡åŸºæœ¬å…¬å¼å’Œå®šç†ï¼Œå¤šåšé¡Œç›®ç·´ç¿’ï¼ŒåŸ¹é¤Šé‚è¼¯æ€ç¶­å’Œè§£é¡ŒæŠ€å·§ã€‚";case"science":return"ç†è§£ç§‘å­¸åŸç†å’Œæ¦‚å¿µï¼Œæ³¨é‡å¯¦é©—æ“ä½œå’Œè§€å¯Ÿï¼ŒåŸ¹é¤Šç§‘å­¸æ¢ç©¶èƒ½åŠ›ã€‚";case"social":return"æŒæ¡åœ°ç†ã€æ­·å²ã€å…¬æ°‘çš„åŸºæœ¬çŸ¥è­˜ï¼Œæ³¨é‡æ™‚äº‹åˆ†æå’Œç¤¾æœƒç¾è±¡ç†è§£ã€‚";default:return"ç³»çµ±åŒ–å­¸ç¿’ï¼Œæ³¨é‡åŸºç¤çŸ¥è­˜çš„æŒæ¡å’Œæ‡‰ç”¨èƒ½åŠ›çš„åŸ¹é¤Šã€‚"}},ke=()=>{var s;switch((s=V.value)==null?void 0:s.code){case"chinese":return"åœ‹æ–‡è€ƒè©¦æ™‚é–“70åˆ†é˜ï¼Œå»ºè­°å‰45é¡Œç”¨50åˆ†é˜ï¼Œä½œæ–‡ç”¨20åˆ†é˜ã€‚";case"english":return"è‹±èªè€ƒè©¦æ™‚é–“60åˆ†é˜ï¼Œè½åŠ›éƒ¨åˆ†è¦å°ˆæ³¨ï¼Œé–±è®€éƒ¨åˆ†è¦å¿«é€Ÿç€è¦½ã€‚";case"math":return"æ•¸å­¸è€ƒè©¦æ™‚é–“80åˆ†é˜ï¼Œå…ˆåšæœƒåšçš„é¡Œç›®ï¼Œé›£é¡Œç•™åˆ°æœ€å¾Œã€‚";case"science":return"è‡ªç„¶ç§‘è€ƒè©¦æ™‚é–“70åˆ†é˜ï¼Œæ³¨æ„åœ–è¡¨åˆ†æå’Œå¯¦é©—æ•¸æ“šè§£è®€ã€‚";case"social":return"ç¤¾æœƒç§‘è€ƒè©¦æ™‚é–“70åˆ†é˜ï¼Œåœ°ç†ã€æ­·å²ã€å…¬æ°‘é¡Œç›®è¦å‡è¡¡åˆ†é…æ™‚é–“ã€‚";default:return"åˆç†åˆ†é…æ™‚é–“ï¼Œå…ˆæ˜“å¾Œé›£ï¼Œæª¢æŸ¥ç­”æ¡ˆæ™‚è¦ä»”ç´°ã€‚"}};return ze(()=>D.subjectId,()=>{P.value="select",Y()}),(s,e)=>{const g=i("v-icon"),b=i("v-card-title"),z=i("v-card-subtitle"),k=i("v-card"),C=i("v-col"),$=i("v-row"),x=i("v-chip"),Q=i("v-card-text"),y=i("v-btn"),q=i("v-card-actions"),xe=i("v-progress-linear"),H=i("v-radio"),ee=i("v-radio-group"),we=i("v-checkbox"),Ce=i("v-spacer"),L=i("v-alert"),Se=i("v-expand-transition"),je=i("v-divider"),Ve=i("v-container");return r(),m(Ve,{class:"pa-4"},{default:t(()=>[l($,{class:"mb-4"},{default:t(()=>[l(C,{cols:"12"},{default:t(()=>[l(k,{color:f.value,dark:"",class:"pa-4 rounded-lg"},{default:t(()=>[l(b,{class:"text-h4 font-weight-bold"},{default:t(()=>[l(g,{large:"",left:""},{default:t(()=>[o(u(le.value),1)]),_:1}),o(" "+u(E.value)+" - ç§‘ç›®ç·´ç¿’ ",1)]),_:1}),l(z,{class:"text-h6 mt-2"},{default:t(()=>[o(u(oe.value),1)]),_:1})]),_:1},8,["color"])]),_:1})]),_:1}),!G.value&&!M.value?(r(),m($,{key:0,class:"mb-6"},{default:t(()=>[l(C,{cols:"12"},{default:t(()=>[l(k,{class:"pa-4"},{default:t(()=>[l(b,{class:"text-h5 mb-4"},{default:t(()=>[l(g,{left:"",color:f.value},{default:t(()=>[...e[5]||(e[5]=[o("mdi-format-list-checks",-1)])]),_:1},8,["color"]),e[6]||(e[6]=o(" é¸æ“‡ç·´ç¿’æ¨¡å¼ ",-1))]),_:1}),l($,null,{default:t(()=>[(r(!0),S(W,null,Z(se.value,n=>(r(),m(C,{cols:"12",md:"6",lg:"4",key:n.id},{default:t(()=>[l(k,{class:"pa-4 h-100",style:J({borderLeft:`4px solid ${f.value}`}),hover:"",onClick:_=>R("topic",n.id)},{default:t(()=>[l(b,{class:"text-h6"},{default:t(()=>[o(u(n.name),1)]),_:2},1024),l(z,{class:"mb-2"},{default:t(()=>[o(u(n.description),1)]),_:2},1024),l(Q,null,{default:t(()=>[c("div",Be,[l(x,{size:"small",class:"mr-1"},{default:t(()=>[...e[7]||(e[7]=[o("20-30é¡Œ",-1)])]),_:1}),l(x,{size:"small"},{default:t(()=>[...e[8]||(e[8]=[o("éš¨æ©Ÿå‡ºé¡Œ",-1)])]),_:1})])]),_:1}),l(q,null,{default:t(()=>[l(y,{color:f.value,block:""},{default:t(()=>[...e[9]||(e[9]=[o(" é–‹å§‹ç·´ç¿’ ",-1)])]),_:1},8,["color"])]),_:1})]),_:2},1032,["style","onClick"])]),_:2},1024))),128)),l(C,{cols:"12",md:"6",lg:"4"},{default:t(()=>[l(k,{class:"pa-4 h-100",style:J({borderLeft:`4px solid ${f.value}`}),color:"green-lighten-5",hover:"",onClick:e[0]||(e[0]=n=>R("comprehensive"))},{default:t(()=>[l(b,{class:"text-h6"},{default:t(()=>[l(g,{left:"",color:"green"},{default:t(()=>[...e[10]||(e[10]=[o("mdi-clipboard-text",-1)])]),_:1}),e[11]||(e[11]=o(" ç¶œåˆæ¸¬é©— ",-1))]),_:1}),l(z,{class:"mb-2"},{default:t(()=>[...e[12]||(e[12]=[o(" æ¶µè“‹æ‰€æœ‰ä¸»é¡Œçš„å®Œæ•´æ¸¬é©— ",-1)])]),_:1}),l(Q,null,{default:t(()=>[c("div",Te,[l(x,{size:"small",color:"green",class:"mr-1"},{default:t(()=>[...e[13]||(e[13]=[o("50é¡Œ",-1)])]),_:1}),l(x,{size:"small",color:"green"},{default:t(()=>[...e[14]||(e[14]=[o("60åˆ†é˜",-1)])]),_:1})]),c("p",null,"æ¸¬è©¦ä½ å°"+u(E.value)+"ç§‘ç›®çš„æ•´é«”æŒæ¡ç¨‹åº¦",1)]),_:1}),l(q,null,{default:t(()=>[l(y,{color:"green",block:""},{default:t(()=>[...e[15]||(e[15]=[o(" é–‹å§‹æ¸¬é©— ",-1)])]),_:1})]),_:1})]),_:1},8,["style"])]),_:1}),l(C,{cols:"12",md:"6",lg:"4"},{default:t(()=>[l(k,{class:"pa-4 h-100",style:J({borderLeft:`4px solid ${f.value}`}),color:"orange-lighten-5",hover:"",onClick:e[1]||(e[1]=n=>R("quick"))},{default:t(()=>[l(b,{class:"text-h6"},{default:t(()=>[l(g,{left:"",color:"orange"},{default:t(()=>[...e[16]||(e[16]=[o("mdi-lightning-bolt",-1)])]),_:1}),e[17]||(e[17]=o(" å¿«é€Ÿç·´ç¿’ ",-1))]),_:1}),l(z,{class:"mb-2"},{default:t(()=>[...e[18]||(e[18]=[o(" 10é¡Œéš¨æ©Ÿç·´ç¿’ ",-1)])]),_:1}),l(Q,null,{default:t(()=>[c("div",he,[l(x,{size:"small",color:"orange",class:"mr-1"},{default:t(()=>[...e[19]||(e[19]=[o("10é¡Œ",-1)])]),_:1}),l(x,{size:"small",color:"orange"},{default:t(()=>[...e[20]||(e[20]=[o("15åˆ†é˜",-1)])]),_:1})]),e[21]||(e[21]=c("p",null,"é©åˆç¢ç‰‡æ™‚é–“çš„å¿«é€Ÿç·´ç¿’",-1))]),_:1}),l(q,null,{default:t(()=>[l(y,{color:"orange",block:""},{default:t(()=>[...e[22]||(e[22]=[o(" é–‹å§‹ç·´ç¿’ ",-1)])]),_:1})]),_:1})]),_:1},8,["style"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):p("",!0),G.value&&!M.value?(r(),m($,{key:1},{default:t(()=>[l(C,{cols:"12"},{default:t(()=>[l(k,{class:"pa-4"},{default:t(()=>[l(xe,{"model-value":ue.value,color:f.value,height:"20",rounded:"",class:"mb-4"},{default:t(({value:n})=>[c("div",qe," ç¬¬ "+u(ae.value+1)+" é¡Œ / å…± "+u(re.value)+" é¡Œ ",1)]),_:1},8,["model-value","color"]),a.value?(r(),m(k,{key:0,class:"pa-6"},{default:t(()=>[l(b,{class:"text-h5 mb-4"},{default:t(()=>[l(x,{color:f.value,class:"mr-2"},{default:t(()=>[o(u(_e(a.value.type)),1)]),_:1},8,["color"]),a.value.difficulty?(r(),m(x,{key:0,color:be(a.value.difficulty),size:"small"},{default:t(()=>[o(u(ge(a.value.difficulty)),1)]),_:1},8,["color"])):p("",!0)]),_:1}),l(Q,null,{default:t(()=>[c("div",Le,u(a.value.question),1),a.value.type==="single"?(r(),m(ee,{key:0,modelValue:j.value,"onUpdate:modelValue":e[2]||(e[2]=n=>j.value=n)},{default:t(()=>[(r(!0),S(W,null,Z(a.value.options,(n,_)=>(r(),m(H,{key:_,label:`${String.fromCharCode(65+_)}. ${n}`,value:_,color:f.value,class:"mb-2"},null,8,["label","value","color"]))),128))]),_:1},8,["modelValue"])):p("",!0),a.value.type==="truefalse"?(r(),m(ee,{key:1,modelValue:j.value,"onUpdate:modelValue":e[3]||(e[3]=n=>j.value=n)},{default:t(()=>[l(H,{label:"æ­£ç¢º (True)",value:!0,color:f.value,class:"mb-2"},null,8,["color"]),l(H,{label:"éŒ¯èª¤ (False)",value:!1,color:f.value},null,8,["color"])]),_:1},8,["modelValue"])):p("",!0),a.value.type==="multiple"?(r(!0),S(W,{key:2},Z(a.value.options,(n,_)=>(r(),m(we,{modelValue:A.value,"onUpdate:modelValue":e[4]||(e[4]=w=>A.value=w),key:_,label:`${String.fromCharCode(65+_)}. ${n}`,value:_,color:f.value,class:"mb-1"},null,8,["modelValue","label","value","color"]))),128)):p("",!0)]),_:1}),l(q,{class:"mt-4"},{default:t(()=>[N.value?p("",!0):(r(),m(y,{key:0,color:f.value,size:"large",disabled:!ie.value,onClick:ce},{default:t(()=>[...e[23]||(e[23]=[o(" æäº¤ç­”æ¡ˆ ",-1)])]),_:1},8,["color","disabled"])),N.value&&ne.value?(r(),m(y,{key:1,color:"primary",size:"large",onClick:de},{default:t(()=>[...e[24]||(e[24]=[o(" ä¸‹ä¸€é¡Œ ",-1)])]),_:1})):p("",!0),l(Ce),l(y,{color:"error",variant:"text",onClick:ve},{default:t(()=>[...e[25]||(e[25]=[o(" çµæŸç·´ç¿’ ",-1)])]),_:1})]),_:1}),l(Se,null,{default:t(()=>[N.value?(r(),m(Q,{key:0,class:"mt-4 pa-4",color:"grey-lighten-4"},{default:t(()=>{var n,_;return[l(L,{type:(n=B.value)!=null&&n.isCorrect?"success":"error",class:"mb-4"},{default:t(()=>{var w;return[(w=B.value)!=null&&w.isCorrect?(r(),S("div",De,"âœ… å›ç­”æ­£ç¢ºï¼")):(r(),S("div",Ee,"âŒ å›ç­”éŒ¯èª¤"))]}),_:1},8,["type"]),e[27]||(e[27]=c("div",{class:"text-body-1"},[c("strong",null,"è§£æï¼š")],-1)),c("div",Me,u(a.value.explanation),1),(_=B.value)!=null&&_.isCorrect?p("",!0):(r(),S("div",Re,[c("div",Fe,[e[26]||(e[26]=c("strong",null,"æ­£ç¢ºç­”æ¡ˆï¼š",-1)),a.value.type==="single"||a.value.type==="truefalse"?(r(),S("span",Ue,u(a.value.type==="truefalse"?a.value.answer?"æ­£ç¢º":"éŒ¯èª¤":String.fromCharCode(65+a.value.answer)),1)):a.value.type==="multiple"?(r(),S("span",Ge,u(a.value.answer.map(w=>String.fromCharCode(65+w)).join(", ")),1)):p("",!0)])]))]}),_:1})):p("",!0)]),_:1})]),_:1})):p("",!0)]),_:1})]),_:1})]),_:1})):p("",!0),M.value?(r(),m($,{key:2},{default:t(()=>[l(C,{cols:"12",md:"8","offset-md":"2"},{default:t(()=>[l(k,{class:"pa-6 text-center"},{default:t(()=>[l(b,{class:"text-h4 mb-4"},{default:t(()=>[l(g,{size:"48",color:h.value.color,class:"mr-4"},{default:t(()=>[o(u(h.value.icon),1)]),_:1},8,["color"]),e[28]||(e[28]=o(" ç·´ç¿’å®Œæˆï¼ ",-1))]),_:1}),l(Q,null,{default:t(()=>{var n,_,w;return[c("div",{class:"text-h2 font-weight-bold",color:h.value.color},u(((n=T.value)==null?void 0:n.score)||0)+"% ",9,He),c("div",We," æ­£ç¢º "+u(((_=T.value)==null?void 0:_.correctAnswers)||0)+" é¡Œ / å…± "+u(((w=T.value)==null?void 0:w.totalQuestions)||0)+" é¡Œ ",1),l(x,{color:h.value.color,size:"large",class:"mt-4"},{default:t(()=>[o(u(h.value.label),1)]),_:1},8,["color"]),l(je,{class:"my-6"}),c("div",Ze,[l(y,{color:"primary",size:"large",onClick:fe},{default:t(()=>[l(g,{left:""},{default:t(()=>[...e[29]||(e[29]=[o("mdi-refresh",-1)])]),_:1}),e[30]||(e[30]=o(" å†ç·´ç¿’ä¸€æ¬¡ ",-1))]),_:1}),X.value>0?(r(),m(y,{key:0,color:"green",size:"large",onClick:me},{default:t(()=>[l(g,{left:""},{default:t(()=>[...e[31]||(e[31]=[o("mdi-notebook",-1)])]),_:1}),o(" æŸ¥çœ‹éŒ¯é¡Œ ("+u(X.value)+") ",1)]),_:1})):p("",!0),l(y,{color:"orange",size:"large",onClick:Y},{default:t(()=>[l(g,{left:""},{default:t(()=>[...e[32]||(e[32]=[o("mdi-arrow-left",-1)])]),_:1}),e[33]||(e[33]=o(" è¿”å›é¸æ“‡ ",-1))]),_:1})])]}),_:1})]),_:1})]),_:1})]),_:1})):p("",!0),!G.value&&!M.value?(r(),m($,{key:3},{default:t(()=>[l(C,{cols:"12"},{default:t(()=>[l(k,{class:"pa-4"},{default:t(()=>[l(b,{class:"text-h5 mb-4"},{default:t(()=>[l(g,{left:"",color:f.value},{default:t(()=>[...e[34]||(e[34]=[o("mdi-lightbulb-on",-1)])]),_:1},8,["color"]),o(" "+u(E.value)+"å­¸ç¿’å»ºè­° ",1)]),_:1}),l(Q,null,{default:t(()=>[l(L,{color:f.value,variant:"tonal",class:"mb-4"},{default:t(()=>[e[35]||(e[35]=c("strong",null,"ğŸ“š å­¸ç¿’é‡é»ï¼š",-1)),o(" "+u(ye()),1)]),_:1},8,["color"]),l(L,{type:"info",variant:"tonal",class:"mb-4"},{default:t(()=>[e[36]||(e[36]=c("strong",null,"â° æ™‚é–“åˆ†é…ï¼š",-1)),o(" å»ºè­°æ¯å¤©èŠ±30åˆ†é˜å°ˆæ³¨ç·´ç¿’"+u(E.value)+"ï¼Œæ•ˆæœæ¯”é€±æœ«ä¸€æ¬¡ç·´ç¿’3å°æ™‚æ›´å¥½ï¼ ",1)]),_:1}),l(L,{type:"success",variant:"tonal",class:"mb-4"},{default:t(()=>[...e[37]||(e[37]=[c("strong",null,"ğŸ“ éŒ¯é¡Œç®¡ç†ï¼š",-1),o(" ç³»çµ±æœƒè‡ªå‹•è¨˜éŒ„ä½ çš„éŒ¯é¡Œï¼Œå®šæœŸè¤‡ç¿’éŒ¯é¡Œæœ¬æ˜¯æé«˜æˆç¸¾çš„é—œéµï¼ ",-1)])]),_:1}),l(L,{type:"warning",variant:"tonal"},{default:t(()=>[e[38]||(e[38]=c("strong",null,"ğŸ¯ è€ƒè©¦ç­–ç•¥ï¼š",-1)),o(" "+u(ke()),1)]),_:1})]),_:1}),l(q,null,{default:t(()=>[l(y,{color:f.value,onClick:pe},{default:t(()=>[l(g,{left:""},{default:t(()=>[...e[39]||(e[39]=[o("mdi-arrow-left",-1)])]),_:1}),e[40]||(e[40]=o(" è¿”å›ç§‘ç›®é¸æ“‡ ",-1))]),_:1},8,["color"])]),_:1})]),_:1})]),_:1})]),_:1})):p("",!0)]),_:1})}}},tt=Ae(Je,[["__scopeId","data-v-dc0f7a56"]]);export{tt as default};
