import{u as te,a as ne}from"./practice.store-BMSW6Ij-.js";import{a as V,g as oe}from"./subjects-Dq9uhs1s.js";import{_ as se}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{H as ae,a6 as u,a9 as t,h as z,a5 as o,a8 as i,n,o as r,Z as l,V as d,ae as A,F as Q,af as W,v as le,ag as re,j as k}from"./vendor-TecACWjj.js";import"./quizzes-BRUEq-FN.js";const ce={class:"d-flex align-center justify-space-between flex-wrap"},ie={class:"d-flex align-center mt-2 mt-sm-0"},de={class:"text-body-1 text-grey mt-2"},ue={class:"d-flex align-center mb-2"},_e={class:"text-caption text-grey"},me={class:"text-h6 py-3 font-weight-medium"},pe={__name:"WrongAnswerReviewView",setup(ve){const m=te(),B=ne(),p=z(null),x=z(!0),I=k(()=>{const s={id:null,name:"å…¨éƒ¨ç§‘ç›®"},e=oe().map(c=>({id:c.id,name:c.name}));return[s,...e]}),N=k(()=>m.getWrongQuestions(p.value)),v=k(()=>N.value);ae(async()=>{x.value=!0;try{const s=m.wrongQuestions,e=new Set;s.forEach(_=>e.add(_.subjectId));const c=Array.from(e).map(_=>B.loadQuestions(_));await Promise.all(c)}catch(s){console.error("è¼‰å…¥éŒ¯é¡Œè³‡æ–™å¤±æ•—:",s)}finally{x.value=!1}});const M=s=>{const e=V(s);return e?e.name:"æœªçŸ¥"},D=s=>{const e=V(s);return e?e.color:"grey"},L=s=>s?new Date(s).toLocaleString("zh-TW",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-",h=(s,e)=>s.type==="single"?s.answer===e:s.type==="multiple"&&Array.isArray(s.answer)?s.answer.includes(e):!1,$=s=>{confirm("ç¢ºå®šå·²æŒæ¡æ­¤é¡Œï¼Ÿå®ƒå°‡å¾éŒ¯é¡Œæœ¬ä¸­ç§»é™¤ã€‚")&&m.markQuestionMastered(s)},E=()=>{confirm("è­¦å‘Šï¼šç¢ºå®šè¦æ¸…ç©ºæ‰€æœ‰éŒ¯é¡Œè¨˜éŒ„å—ï¼Ÿæ­¤æ“ä½œç„¡æ³•å¾©åŸã€‚")&&m.clearWrongQuestions()};return(s,e)=>{const c=o("v-icon"),_=o("v-card-title"),F=o("v-card-subtitle"),O=o("v-select"),y=o("v-btn"),w=o("v-card"),f=o("v-col"),g=o("v-row"),P=o("v-progress-circular"),j=o("v-chip"),C=o("v-spacer"),R=o("v-card-item"),T=o("v-expansion-panel-title"),H=o("v-avatar"),U=o("v-list-item-title"),Z=o("v-list-item"),G=o("v-list"),J=o("v-alert"),K=o("v-expansion-panel-text"),X=o("v-expansion-panel"),Y=o("v-expansion-panels"),q=o("v-card-actions"),ee=o("v-container");return i(),u(ee,{class:"pa-4"},{default:t(()=>[n(g,{class:"mb-4"},{default:t(()=>[n(f,{cols:"12"},{default:t(()=>[n(w,{color:"red-lighten-5",class:"pa-4 rounded-lg"},{default:t(()=>[r("div",ce,[r("div",null,[n(_,{class:"text-h4 font-weight-bold text-red-darken-2"},{default:t(()=>[n(c,{large:"",left:"",color:"red-darken-2"},{default:t(()=>[...e[2]||(e[2]=[l("mdi-notebook-edit",-1)])]),_:1}),e[3]||(e[3]=l(" éŒ¯é¡Œè¤‡ç¿’æœ¬ ",-1))]),_:1}),n(F,{class:"text-h6 mt-1 text-red-darken-4"},{default:t(()=>[l(" ç´¯ç©å¾…è¤‡ç¿’ï¼š"+d(v.value.length)+" é¡Œ ",1)]),_:1})]),r("div",ie,[n(O,{modelValue:p.value,"onUpdate:modelValue":e[0]||(e[0]=a=>p.value=a),items:I.value,"item-title":"name","item-value":"id",label:"ç¯©é¸ç§‘ç›®",variant:"outlined",density:"compact","bg-color":"white","hide-details":"",class:"mr-2",style:{"min-width":"150px"}},null,8,["modelValue","items"]),n(y,{color:"red-darken-2",variant:"flat",onClick:E,disabled:v.value.length===0},{default:t(()=>[n(c,{left:""},{default:t(()=>[...e[4]||(e[4]=[l("mdi-delete-sweep",-1)])]),_:1}),e[5]||(e[5]=l(" æ¸…ç©ºå…¨éƒ¨ ",-1))]),_:1},8,["disabled"])])])]),_:1})]),_:1})]),_:1}),x.value?(i(),u(g,{key:0},{default:t(()=>[n(f,{cols:"12",class:"text-center pa-12"},{default:t(()=>[n(P,{indeterminate:"",color:"primary",size:"64"}),e[6]||(e[6]=r("div",{class:"mt-4 text-grey"},"æ­£åœ¨è¼‰å…¥éŒ¯é¡Œè³‡æ–™...",-1))]),_:1})]),_:1})):v.value.length===0?(i(),u(g,{key:1},{default:t(()=>[n(f,{cols:"12"},{default:t(()=>[n(w,{class:"pa-12 text-center rounded-lg",variant:"outlined",style:{border:"2px dashed #ddd"}},{default:t(()=>[n(c,{size:"80",color:"success",class:"mb-4"},{default:t(()=>[...e[7]||(e[7]=[l("mdi-check-circle-outline",-1)])]),_:1}),e[9]||(e[9]=r("h3",{class:"text-h5 text-grey-darken-2 font-weight-bold"},"å¤ªæ£’äº†ï¼æ²’æœ‰å¾…è¤‡ç¿’çš„éŒ¯é¡Œ",-1)),r("p",de,d(p.value?"æ­¤ç§‘ç›®ç›®å‰æ²’æœ‰éŒ¯é¡Œ":"ç¹¼çºŒä¿æŒï¼Œå»ç·´ç¿’æ–°çš„é¡Œç›®å§ï¼"),1),n(y,{color:"primary",size:"large",class:"mt-6",onClick:e[1]||(e[1]=a=>s.$router.push({name:"home"}))},{default:t(()=>[...e[8]||(e[8]=[l(" è¿”å›é¦–é  ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})):(i(),u(g,{key:2},{default:t(()=>[(i(!0),A(Q,null,W(v.value,a=>(i(),u(f,{cols:"12",key:a.id},{default:t(()=>[n(w,{class:"rounded-lg elevation-2 border-l-xl"},{default:t(()=>[n(R,{class:"pb-0"},{default:t(()=>[r("div",ue,[n(j,{color:D(a.subjectId),size:"small",class:"mr-2 font-weight-bold"},{default:t(()=>[l(d(M(a.subjectId)),1)]),_:2},1032,["color"]),n(j,{color:"red-lighten-4","text-color":"red-darken-2",size:"small",class:"mr-2"},{default:t(()=>[l(" éŒ¯èª¤ "+d(a.count)+" æ¬¡ ",1)]),_:2},1024),n(C),r("span",_e," æœ€å¾ŒéŒ¯èª¤ï¼š"+d(L(a.lastWrong)),1)]),r("div",me,d(a.question),1)]),_:2},1024),n(Y,{variant:"accordion",class:"elevation-0"},{default:t(()=>[n(X,null,{default:t(()=>[n(T,{"collapse-icon":"mdi-lightbulb-on"},{default:t(()=>[...e[10]||(e[10]=[r("span",{class:"text-primary font-weight-bold"},"æŸ¥çœ‹é¸é …èˆ‡è§£æ",-1)])]),_:1}),n(K,null,{default:t(()=>[n(G,{density:"compact",class:"bg-grey-lighten-5 rounded mb-4"},{default:t(()=>[(i(!0),A(Q,null,W(a.options,(S,b)=>(i(),u(Z,{key:b},{prepend:t(()=>[n(H,{size:"24",color:"grey-lighten-1",class:"text-caption text-white mr-2"},{default:t(()=>[l(d(String.fromCharCode(65+b)),1)]),_:2},1024)]),default:t(()=>[n(U,{class:le({"text-green-darken-2 font-weight-bold":h(a,b)})},{default:t(()=>[l(d(S)+" ",1),h(a,b)?(i(),u(c,{key:0,color:"green",size:"small",class:"ml-2"},{default:t(()=>[...e[11]||(e[11]=[l("mdi-check-circle",-1)])]),_:1})):re("",!0)]),_:2},1032,["class"])]),_:2},1024))),128))]),_:2},1024),n(J,{type:"info",variant:"tonal",class:"mb-2",border:"start"},{default:t(()=>[e[12]||(e[12]=r("strong",null,"ğŸ’¡ è§£æï¼š",-1)),l(" "+d(a.explanation||"æš«ç„¡è§£æ"),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),n(q,{class:"pa-4 pt-2"},{default:t(()=>[n(C),n(y,{color:"success",variant:"elevated","prepend-icon":"mdi-check",onClick:S=>$(a.id)},{default:t(()=>[...e[13]||(e[13]=[l(" æˆ‘å·²æŒæ¡ (ç§»é™¤) ",-1)])]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}))]),_:1})}}},we=se(pe,[["__scopeId","data-v-da002e09"]]);export{we as default};
