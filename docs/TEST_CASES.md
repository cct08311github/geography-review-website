# ç§‘ç›®ç·´ç¿’åŠŸèƒ½ - æ¸¬è©¦æ¡ˆä¾‹æ–‡æª”

## ğŸ¯ æ¸¬è©¦æ¦‚è¿°

### æ¸¬è©¦ç›®æ¨™
ç¢ºä¿ç§‘ç›®ç·´ç¿’åŠŸèƒ½çš„ç©©å®šæ€§ã€æ­£ç¢ºæ€§å’Œè‰¯å¥½çš„ç”¨æˆ¶é«”é©—ã€‚

### æ¸¬è©¦ç¯„åœ
- ç·´ç¿’æœƒè©±ç®¡ç†åŠŸèƒ½
- é¡Œç›®ç®¡ç†èˆ‡éš¨æ©ŸåŒ–
- è©•åˆ†ç³»çµ±æ­£ç¢ºæ€§
- éŒ¯é¡Œæœ¬åŠŸèƒ½
- å­¸ç¿’é€²åº¦è¿½è¹¤
- ç”¨æˆ¶ç•Œé¢äº¤äº’

### æ¸¬è©¦ç­–ç•¥
- **å–®å…ƒæ¸¬è©¦**: æ¸¬è©¦ç¨ç«‹æ¨¡å¡Šå’Œå‡½æ•¸
- **é›†æˆæ¸¬è©¦**: æ¸¬è©¦æ¨¡å¡Šé–“å”ä½œ
- **E2Eæ¸¬è©¦**: æ¸¬è©¦å®Œæ•´ç”¨æˆ¶æµç¨‹
- **æ€§èƒ½æ¸¬è©¦**: æ¸¬è©¦ç³»çµ±æ€§èƒ½æŒ‡æ¨™
- **å…¼å®¹æ€§æ¸¬è©¦**: æ¸¬è©¦ä¸åŒç’°å¢ƒé©é…

## ğŸ§ª å–®å…ƒæ¸¬è©¦æ¡ˆä¾‹

### 1. ç·´ç¿’æœƒè©±ç®¡ç†æ¸¬è©¦

#### æ¸¬è©¦å¥—ä»¶: Practice Store
```javascript
describe('Practice Store å–®å…ƒæ¸¬è©¦', () => {
  describe('é–‹å§‹ç·´ç¿’æœƒè©±', () => {
    test('æ‡‰è©²èƒ½æˆåŠŸé–‹å§‹quickæ¨¡å¼ç·´ç¿’', async () => {
      // æ¸¬è©¦é‚è¼¯
    });
    
    test('æ‡‰è©²èƒ½æˆåŠŸé–‹å§‹topicæ¨¡å¼ç·´ç¿’', async () => {
      // æ¸¬è©¦é‚è¼¯
    });
    
    test('æ‡‰è©²èƒ½æˆåŠŸé–‹å§‹comprehensiveæ¨¡å¼ç·´ç¿’', async () => {
      // æ¸¬è©¦é‚è¼¯
    });
    
    test('ç„¡æ•ˆåƒæ•¸æ‡‰è©²æ‹‹å‡ºéŒ¯èª¤', async () => {
      // æ¸¬è©¦é‚è¼¯
    });
  });
  
  describe('æäº¤ç­”æ¡ˆ', () => {
    test('æ­£ç¢ºç­”æ¡ˆæ‡‰è©²æ›´æ–°æœƒè©±ç‹€æ…‹', async () => {
      // æ¸¬è©¦é‚è¼¯
    });
    
    test('éŒ¯èª¤ç­”æ¡ˆæ‡‰è©²è¨˜éŒ„åˆ°éŒ¯é¡Œæœ¬', async () => {
      // æ¸¬è©¦é‚è¼¯
    });
    
    test('é‡è¤‡æäº¤æ‡‰è©²è¢«å¿½ç•¥', async () => {
      // æ¸¬è©¦é‚è¼¯
    });
  });
  
  describe('çµæŸç·´ç¿’æœƒè©±', () => {
    test('æ‡‰è©²æ­£ç¢ºè¨ˆç®—ç¸½åˆ†', async () => {
      // æ¸¬è©¦é‚è¼¯
    });
    
    test('æ‡‰è©²ä¿å­˜åˆ°ç·´ç¿’æ­·å²', async () => {
      // æ¸¬è©¦é‚è¼¯
    });
    
    test('æ‡‰è©²æ¸…ç†ç•¶å‰æœƒè©±', async () => {
      // æ¸¬è©¦é‚è¼¯
    });
  });
});
```

#### æ¸¬è©¦å¥—ä»¶: Question Store
```javascript
describe('Question Store å–®å…ƒæ¸¬è©¦', () => {
  describe('åŠ è¼‰é¡Œç›®', () => {
    test('æ‡‰è©²èƒ½æˆåŠŸåŠ è¼‰ç§‘ç›®é¡Œç›®', async () => {
      // æ¸¬è©¦é‚è¼¯
    });
    
    test('é¡Œç›®ä¸è¶³æ™‚æ‡‰è©²æ‹‹å‡ºè­¦å‘Š', async () => {
      // æ¸¬è©¦é‚è¼¯
    });
    
    test('æ‡‰è©²ä½¿ç”¨ç·©å­˜æé«˜æ€§èƒ½', async () => {
      // æ¸¬è©¦é‚è¼¯
    });
  });
  
  describe('ç²å–é¡Œç›®', () => {
    test('æ‡‰è©²èƒ½ç²å–éš¨æ©Ÿé¡Œç›®', async () => {
      // æ¸¬è©¦é‚è¼¯
    });
    
    test('æ‡‰è©²èƒ½æŒ‰ä¸»é¡Œéæ¿¾é¡Œç›®', async () => {
      // æ¸¬è©¦é‚è¼¯
    });
    
    test('æ‡‰è©²èƒ½æŒ‰é›£åº¦éæ¿¾é¡Œç›®', async () => {
      // æ¸¬è©¦é‚è¼¯
    });
    
    test('æ‡‰è©²èƒ½æ ¹æ“šIDç²å–é¡Œç›®', async () => {
      // æ¸¬è©¦é‚è¼¯
    });
  });
});
```

### 2. è©•åˆ†ç³»çµ±æ¸¬è©¦

#### æ¸¬è©¦å¥—ä»¶: Scoring System
```javascript
describe('è©•åˆ†ç³»çµ±å–®å…ƒæ¸¬è©¦', () => {
  describe('å–®é¸é¡Œè©•åˆ†', () => {
    test('æ­£ç¢ºç­”æ¡ˆæ‡‰è©²å¾—åˆ†', () => {
      const question = {
        type: 'single',
        answer: 0,
        options: ['A', 'B', 'C', 'D']
      };
      
      const result = checkAnswer(question, 0);
      expect(result.isCorrect).toBe(true);
      expect(result.score).toBe(1);
    });
    
    test('éŒ¯èª¤ç­”æ¡ˆä¸å¾—åˆ†', () => {
      const question = {
        type: 'single',
        answer: 0,
        options: ['A', 'B', 'C', 'D']
      };
      
      const result = checkAnswer(question, 1);
      expect(result.isCorrect).toBe(false);
      expect(result.score).toBe(0);
    });
    
    test('ç„¡æ•ˆç­”æ¡ˆç´¢å¼•æ‡‰è©²æ‹‹å‡ºéŒ¯èª¤', () => {
      const question = {
        type: 'single',
        answer: 0,
        options: ['A', 'B', 'C', 'D']
      };
      
      expect(() => checkAnswer(question, 5)).toThrow();
    });
  });
  
  describe('å¤šé¸é¡Œè©•åˆ†', () => {
    test('å®Œå…¨æ­£ç¢ºæ‡‰è©²å¾—åˆ†', () => {
      const question = {
        type: 'multiple',
        answer: [0, 2],
        options: ['A', 'B', 'C', 'D']
      };
      
      const result = checkAnswer(question, [0, 2]);
      expect(result.isCorrect).toBe(true);
      expect(result.score).toBe(1);
    });
    
    test('éƒ¨åˆ†æ­£ç¢ºä¸å¾—åˆ†', () => {
      const question = {
        type: 'multiple',
        answer: [0, 2],
        options: ['A', 'B', 'C', 'D']
      };
      
      const result = checkAnswer(question, [0]);
      expect(result.isCorrect).toBe(false);
      expect(result.score).toBe(0);
    });
    
    test('é †åºä¸åŒä½†å…§å®¹ç›¸åŒæ‡‰è©²å¾—åˆ†', () => {
      const question = {
        type: 'multiple',
        answer: [0, 2],
        options: ['A', 'B', 'C', 'D']
      };
      
      const result = checkAnswer(question, [2, 0]);
      expect(result.isCorrect).toBe(true);
      expect(result.score).toBe(1);
    });
  });
  
  describe('åˆ¤æ–·é¡Œè©•åˆ†', () => {
    test('æ­£ç¢ºåˆ¤æ–·æ‡‰è©²å¾—åˆ†', () => {
      const question = {
        type: 'truefalse',
        answer: true,
        options: ['æ­£ç¢º', 'éŒ¯èª¤']
      };
      
      const result = checkAnswer(question, true);
      expect(result.isCorrect).toBe(true);
      expect(result.score).toBe(1);
    });
    
    test('éŒ¯èª¤åˆ¤æ–·ä¸å¾—åˆ†', () => {
      const question = {
        type: 'truefalse',
        answer: true,
        options: ['æ­£ç¢º', 'éŒ¯èª¤']
      };
      
      const result = checkAnswer(question, false);
      expect(result.isCorrect).toBe(false);
      expect(result.score).toBe(0);
    });
  });
  
  describe('ç¸½åˆ†è¨ˆç®—', () => {
    test('æ‡‰è©²æ­£ç¢ºè¨ˆç®—ç™¾åˆ†æ¯”åˆ†æ•¸', () => {
      const results = [
        { isCorrect: true, score: 1 },
        { isCorrect: true, score: 1 },
        { isCorrect: false, score: 0 },
        { isCorrect: true, score: 1 }
      ];
      
      const total = calculateTotalScore(results);
      expect(total.totalQuestions).toBe(4);
      expect(total.correctAnswers).toBe(3);
      expect(total.score).toBe(75);
      expect(total.wrongAnswers).toBe(1);
    });
    
    test('å…¨å°æ‡‰è©²æ˜¯100åˆ†', () => {
      const results = [
        { isCorrect: true, score: 1 },
        { isCorrect: true, score: 1 },
        { isCorrect: true, score: 1 }
      ];
      
      const total = calculateTotalScore(results);
      expect(total.score).toBe(100);
    });
    
    test('å…¨éŒ¯æ‡‰è©²æ˜¯0åˆ†', () => {
      const results = [
        { isCorrect: false, score: 0 },
        { isCorrect: false, score: 0 },
        { isCorrect: false, score: 0 }
      ];
      
      const total = calculateTotalScore(results);
      expect(total.score).toBe(0);
    });
  });
});
```

### 3. é¡Œç›®ç”Ÿæˆå™¨æ¸¬è©¦

#### æ¸¬è©¦å¥—ä»¶: Question Generator
```javascript
describe('é¡Œç›®ç”Ÿæˆå™¨å–®å…ƒæ¸¬è©¦', () => {
  const mockQuestions = [
    { id: 1, topicId: 1, difficulty: 'easy' },
    { id: 2, topicId: 1, difficulty: 'medium' },
    { id: 3, topicId: 2, difficulty: 'easy' },
    { id: 4, topicId: 2, difficulty: 'hard' },
    { id: 5, topicId: 3, difficulty: 'medium' }
  ];
  
  describe('éš¨æ©Ÿé¸æ“‡é¡Œç›®', () => {
    test('æ‡‰è©²è¿”å›æŒ‡å®šæ•¸é‡çš„é¡Œç›®', () => {
      const selected = getRandomQuestions(mockQuestions, 3);
      expect(selected).toHaveLength(3);
    });
    
    test('é¡Œç›®ä¸è¶³æ™‚æ‡‰è©²è¿”å›æ‰€æœ‰å¯ç”¨é¡Œç›®', () => {
      const selected = getRandomQuestions(mockQuestions, 10);
      expect(selected).toHaveLength(5);
    });
    
    test('æ‡‰è©²èƒ½æŒ‰ä¸»é¡Œéæ¿¾', () => {
      const selected = getRandomQuestions(mockQuestions, 2, { topicId: 1 });
      expect(selected).toHaveLength(2);
      expect(selected.every(q => q.topicId === 1)).toBe(true);
    });
    
    test('æ‡‰è©²èƒ½æŒ‰é›£åº¦éæ¿¾', () => {
      const selected = getRandomQuestions(mockQuestions, 2, { difficulty: 'easy' });
      expect(selected.every(q => q.difficulty === 'easy')).toBe(true);
    });
    
    test('æ‡‰è©²è¿”å›ä¸åŒçš„é¡Œç›®ï¼ˆç›¡é‡ï¼‰', () => {
      const selected1 = getRandomQuestions(mockQuestions, 3);
      const selected2 = getRandomQuestions(mockQuestions, 3);
      
      // ç”±æ–¼æ˜¯éš¨æ©Ÿçš„ï¼Œå¯èƒ½ç›¸åŒï¼Œä½†å¤šæ¬¡æ¸¬è©¦æ‡‰è©²èƒ½ç™¼ç¾å·®ç•°
      const ids1 = selected1.map(q => q.id).sort();
      const ids2 = selected2.map(q => q.id).sort();
      
      // è‡³å°‘æœ‰ä¸€æ¬¡æ¸¬è©¦å®ƒå€‘æ‡‰è©²ä¸åŒ
      expect(JSON.stringify(ids1) !== JSON.stringify(ids2)).toBeTruthy();
    });
  });
  
  describe('æ‰“äº‚é¡Œç›®é †åº', () => {
    test('æ‡‰è©²è¿”å›ç›¸åŒæ•¸é‡çš„é¡Œç›®', () => {
      const shuffled = shuffleQuestions(mockQuestions);
      expect(shuffled).toHaveLength(mockQuestions.length);
    });
    
    test('æ‡‰è©²åŒ…å«æ‰€æœ‰åŸé¡Œç›®', () => {
      const shuffled = shuffleQuestions(mockQuestions);
      const originalIds = mockQuestions.map(q => q.id).sort();
      const shuffledIds = shuffled.map(q => q.id).sort();
      
      expect(shuffledIds).toEqual(originalIds);
    });
    
    test('é †åºæ‡‰è©²ä¸åŒï¼ˆé«˜æ¦‚ç‡ï¼‰', () => {
      const shuffled = shuffleQuestions(mockQuestions);
      const isSameOrder = mockQuestions.every((q, i) => q.id === shuffled[i].id);
      
      // ç”±æ–¼æ˜¯éš¨æ©Ÿçš„ï¼Œå¯èƒ½ç›¸åŒï¼Œä½†æ¦‚ç‡å¾ˆä½
      expect(isSameOrder).toBe(false);
    });
  });
  
  describe('æ‰“äº‚é¸é …é †åº', () => {
    const options = ['é¸é …A', 'é¸é …B', 'é¸é …C', 'é¸é …D'];
    
    test('æ‡‰è©²è¿”å›ç›¸åŒæ•¸é‡çš„é¸é …', () => {
      const result = shuffleOptions(options);
      expect(result.options).toHaveLength(options.length);
    });
    
    test('æ‡‰è©²åŒ…å«æ‰€æœ‰åŸé¸é …', () => {
      const result = shuffleOptions(options);
      const sortedOriginal = [...options].sort();
      const sortedShuffled = [...result.options].sort();
      
      expect(sortedShuffled).toEqual(sortedOriginal);
    });
    
    test('æ‡‰è©²æä¾›æ­£ç¢ºçš„æ˜ å°„é—œä¿‚', () => {
      const result = shuffleOptions(options);
      
      // é©—è­‰æ˜ å°„é—œä¿‚
      result.options.forEach((option, newIndex) => {
        const originalIndex = result.mapping[newIndex];
        expect(option).toBe(options[originalIndex]);
      });
    });
  });
});
```

### 4. æ•¸æ“šé©—è­‰å™¨æ¸¬è©¦

#### æ¸¬è©¦å¥—ä»¶: Data Validator
```javascript
describe('æ•¸æ“šé©—è­‰å™¨å–®å…ƒæ¸¬è©¦', () => {
  describe('é¡Œç›®æ•¸æ“šé©—è­‰', () => {
    const validQuestion = {
      id: 1,
      subjectId: 1,
      type: 'single',
      question: 'æ¸¬è©¦å•é¡Œ',
      options: ['A', 'B', 'C', 'D'],
      answer: 0
    };
    
    test('æœ‰æ•ˆé¡Œç›®æ‡‰è©²é€šéé©—è­‰', () => {
      const result = validateQuestion(validQuestion);
      expect(result.isValid).toBe(true);
      expect(result.errors).toHaveLength(0);
    });
    
    test('ç¼ºå°‘å¿…è¦å­—æ®µæ‡‰è©²å¤±æ•—', () => {
      const invalidQuestion = { ...validQuestion };
      delete invalidQuestion.id;
      
      const result = validateQuestion(invalidQuestion);
      expect(result.isValid).toBe(false);
      expect(result.errors).toContain('ç¼ºå°‘å¿…è¦å­—æ®µ: id');
    });
    
    test('ç„¡æ•ˆé¡Œå‹æ‡‰è©²å¤±æ•—', () => {
      const invalidQuestion = { ...validQuestion, type: 'invalid' };
      
      const result = validateQuestion(invalidQuestion);
      expect(result.isValid).toBe(false);
      expect(result.errors).toContain('ç„¡æ•ˆçš„é¡Œå‹: invalid');
    });
    
    test('ç„¡æ•ˆé¸é …æ‡‰è©²å¤±æ•—', () => {
      const invalidQuestion = { ...validQuestion, options: [] };
      
      const result = validateQuestion(invalidQuestion);
      expect(result.isValid).toBe(false);
      expect(result.errors).toContain('é¸é …å¿…é ˆæ˜¯éç©ºæ•¸çµ„');
    });
    
    test('ç„¡æ•ˆå–®é¸é¡Œç­”æ¡ˆæ‡‰è©²å¤±æ•—', () => {
      const invalidQuestion = { ...validQuestion, answer: 5 };
      
      const result = validateQuestion(invalidQuestion);
      expect(result.isValid).toBe(false);
      expect(result.errors).toContain('å–®é¸é¡Œç­”æ¡ˆå¿…é ˆæ˜¯æœ‰æ•ˆçš„é¸é …ç´¢å¼•');
    });
    
    test('ç„¡æ•ˆå¤šé¸é¡Œç­”æ¡ˆæ‡‰è©²å¤±æ•—', () => {
      const invalidQuestion = {
        ...validQuestion,
        type: 'multiple',
        answer: [0, 5]
      };
      
      const result = validateQuestion(invalidQuestion);
      expect(result.isValid).toBe(false);
      expect(result.errors).toContain('å¤šé¸é¡Œç­”æ¡ˆå¿…é ˆæ˜¯æœ‰æ•ˆçš„é¸é …ç´¢å¼•æ•¸çµ„');
    });
  });
  
  describe('ç·´ç¿’åƒæ•¸é©—è­‰', () => {
    test('æœ‰æ•ˆåƒæ•¸æ‡‰è©²é€šéé©—è­‰', () => {
      const params = {
        subjectId: 1,
        mode: 'quick'
      };
      
      const result = validatePracticeParams(params);
      expect(result.isValid).toBe(true);
    });
    
    test('ç¼ºå°‘subjectIdæ‡‰è©²å¤±æ•—', () => {
      const params = {
        mode: 'quick'
      };
      
      const result = validatePracticeParams(params);
      expect(result.isValid).toBe(false);
      expect(result.errors).toContain('subjectId å¿…é ˆæ˜¯æ•¸å­—');
    });
    
    test('ç„¡æ•ˆmodeæ‡‰è©²å¤±æ•—', () => {
      const params = {
        subjectId: 1,
        mode: 'invalid'
      };
      
      const result = validatePracticeParams(params);
      expect(result.isValid).toBe(false);
      expect(result.errors).toContain('mode å¿…é ˆæ˜¯ä»¥ä¸‹ä¹‹ä¸€: topic, comprehensive, quick');
    });
    
    test('topicæ¨¡å¼ç¼ºå°‘topicIdæ‡‰è©²å¤±æ•—', () => {
      const params = {
        subjectId: 1,
        mode: 'topic'
      };
      
      const result = validatePracticeParams(params);
      expect(result.isValid).toBe(false);
      expect(result.errors).toContain('topic æ¨¡å¼å¿…é ˆæä¾› topicId');
    });
    
    test('ç„¡æ•ˆquestionCountæ‡‰è©²å¤±æ•—', () => {
      const params = {
        subjectId: 1,
        mode: 'quick',
        questionCount: -1
      };
      
      const result = validatePracticeParams(params);
      expect(result.isValid).toBe(false);
      expect(result.errors).toContain('questionCount å¿…é ˆæ˜¯å¤§æ–¼0çš„æ•¸å­—');
    });
  });
});
```

## ğŸ”— é›†æˆæ¸¬è©¦æ¡ˆä¾‹

### 1. å®Œæ•´ç·´ç¿’æµç¨‹æ¸¬è©¦

#### æ¸¬è©¦å¥—ä»¶: Complete Practice Flow
```javascript
describe('å®Œæ•´ç·´ç¿’æµç¨‹é›†æˆæ¸¬è©¦', () => {
  test('æ‡‰è©²èƒ½å®Œæˆquickæ¨¡å¼å®Œæ•´æµç¨‹', async () => {
    // 1. åˆå§‹åŒ–store
    const practiceStore = usePracticeStore();
    const questionStore = useQuestionStore();
    
    // 2. åŠ è¼‰é¡Œç›®
    await questionStore.loadQuestions(1); // ç¤¾æœƒç§‘
    
    // 3. é–‹å§‹ç·´ç¿’
    const session = await practiceStore.startPracticeSession({
      subjectId: 1,
      mode: 'quick',
      questionCount: 5
    });
    
    expect(session).toBeDefined();
    expect(session.questions).toHaveLength(5);
    
    // 4. å›ç­”æ‰€æœ‰é¡Œç›®
    let totalScore = 0;
    
    for (let i = 0; i < session.questions.length; i++) {
      const question = session.questions[i];
      
      // ç²å–é¡Œç›®è©³æƒ…
      const questionDetail = await questionStore.getQuestionById(question.id);
      
      // éš¨æ©Ÿé¸æ“‡ç­”æ¡ˆï¼ˆæ¸¬è©¦ç”¨ï¼‰
      const randomAnswer = Math.floor(Math.random() * questionDetail.options.length);
      
      // æäº¤ç­”æ¡ˆ
      const result = await practiceStore.submitAnswer({
        questionId: question.id,
        answer: randomAnswer
      });
      
      if (result.isCorrect) {
        totalScore++;
      }
    }
    
    // 5. çµæŸç·´ç¿’
    const finalResult = await practiceStore.endPracticeSession();
    
    expect(finalResult.totalQuestions).toBe(5);
    expect(finalResult.correctAnswers).toBe(totalScore);
    expect(finalResult.score).toBe((totalScore / 5) * 100);
    
    // 6. é©—è­‰æ­·å²è¨˜éŒ„
    expect(practiceStore.sessionHistory).toHaveLength(1);
    
    // 7. é©—è­‰éŒ¯é¡Œè¨˜éŒ„ï¼ˆå¦‚æœæœ‰éŒ¯é¡Œï¼‰
    const wrongQuestions = practiceStore.getWrongQuestions(1);
    expect(wrongQuestions).toBeDefined();
  });
  
  test('æ‡‰è©²èƒ½è™•ç†ä¸­æ–·çš„ç·´ç¿’æœƒè©±', async () => {
    const practiceStore = usePracticeStore();
    
    // é–‹å§‹ç·´ç¿’ä½†æœªå®Œæˆ
    await practiceStore.startPracticeSession({
      subjectId: 1,
      mode: 'quick',
      questionCount: 3
    });
    
    // å›ç­”éƒ¨åˆ†é¡Œç›®
    await practiceStore.submitAnswer({
      questionId: practiceStore.currentSession.questions[0].id,
      answer: 0
    });
    
    // åˆ·æ–°é é¢æ¨¡æ“¬ï¼ˆé‡æ–°åŠ è¼‰storeï¼‰
    // åœ¨å¯¦éš›æ‡‰ç”¨ä¸­ï¼Œstoreæœƒå¾LocalStorageæ¢å¾©
    
    // é©—è­‰å¯ä»¥ç¹¼çºŒæœªå®Œæˆçš„ç·´ç¿’
    expect(practiceStore.currentSession).toBeDefined();
    expect(practiceStore.currentSession.userAnswers.size).toBe(1);
  });
  
  test('æ‡‰è©²èƒ½æ¢å¾©ä¸­æ–·çš„ç·´ç¿’', async () => {
    // é€™å€‹æ¸¬è©¦æ¨¡æ“¬ç€è¦½å™¨åˆ·æ–°å¾Œæ¢å¾©ç·´ç¿’æœƒè©±
    const practiceStore = usePracticeStore();
    
    // æ¨¡æ“¬å¾LocalStorageæ¢å¾©æ•¸æ“š
    const savedSession = {
      id: 'test_session',
      subjectId: 1,
      mode: 'quick',
      questions: [{ id: 1 }, { id: 2 }, { id: 3 }],
      currentQuestionIndex: 1,
      userAnswers: new Map([[1, 0]]),
      startTime: new Date().toISOString(),
      completed: false
    };
    
    // æ¢å¾©æœƒè©±
    practiceStore.$patch({
      currentSession: savedSession
    });
    
    // æ‡‰è©²èƒ½ç¹¼çºŒç·´ç¿’
    expect(practiceStore.currentSession).toBeDefined();
    expect(practiceStore.currentSession.currentQuestionIndex).toBe(1);
    
    // æäº¤ä¸‹ä¸€é¡Œç­”æ¡ˆ
    await practiceStore.submitAnswer({
      questionId: 2,
      answer: 1
    });
    
    expect(practiceStore.currentSession.userAnswers.size).toBe(2);
  });
});

### 2. éŒ¯é¡Œæœ¬åŠŸèƒ½æ¸¬è©¦

#### æ¸¬è©¦å¥—ä»¶: Wrong Answer Notebook
```javascript
describe('éŒ¯é¡Œæœ¬åŠŸèƒ½é›†æˆæ¸¬è©¦', () => {
  beforeEach(async () => {
    // é‡ç½®store
    const practiceStore = usePracticeStore();
    practiceStore.$reset();
  });
  
  test('æ‡‰è©²èƒ½è‡ªå‹•è¨˜éŒ„éŒ¯é¡Œ', async () => {
    const practiceStore = usePracticeStore();
    const questionStore = useQuestionStore();
    
    // åŠ è¼‰æ¸¬è©¦é¡Œç›®
    await questionStore.loadQuestions(1);
    
    // å‰µå»ºä¸€å€‹æœƒå›ç­”éŒ¯èª¤çš„ç·´ç¿’æœƒè©±
    const session = await practiceStore.startPracticeSession({
      subjectId: 1,
      mode: 'quick',
      questionCount: 3
    });
    
    // æ•…æ„å›ç­”éŒ¯èª¤
    for (const question of session.questions) {
      // ç¸½æ˜¯é¸æ“‡éŒ¯èª¤ç­”æ¡ˆï¼ˆå‡è¨­æ­£ç¢ºç­”æ¡ˆæ˜¯0ï¼Œæˆ‘å€‘é¸æ“‡1ï¼‰
      await practiceStore.submitAnswer({
        questionId: question.id,
        answer: 1
      });
    }
    
    // çµæŸç·´ç¿’
    await practiceStore.endPracticeSession();
    
    // é©—è­‰éŒ¯é¡Œè¨˜éŒ„
    const wrongQuestions = practiceStore.getWrongQuestions(1);
    expect(wrongQuestions.size).toBe(3); // 3é¡Œéƒ½éŒ¯äº†
  });
  
  test('æ‡‰è©²èƒ½æŒ‰ç§‘ç›®åˆ†é¡éŒ¯é¡Œ', async () => {
    const practiceStore = usePracticeStore();
    
    // åœ¨ä¸åŒç§‘ç›®ä¸­ç”¢ç”ŸéŒ¯é¡Œ
    // ç§‘ç›®1çš„éŒ¯é¡Œ
    await practiceStore.startPracticeSession({ subjectId: 1, mode: 'quick', questionCount: 2 });
    // ... æäº¤éŒ¯èª¤ç­”æ¡ˆ
    await practiceStore.endPracticeSession();
    
    // ç§‘ç›®2çš„éŒ¯é¡Œ
    await practiceStore.startPracticeSession({ subjectId: 2, mode: 'quick', questionCount: 2 });
    // ... æäº¤éŒ¯èª¤ç­”æ¡ˆ
    await practiceStore.endPracticeSession();
    
    // é©—è­‰æŒ‰ç§‘ç›®ç²å–éŒ¯é¡Œ
    const wrongQuestions1 = practiceStore.getWrongQuestions(1);
    const wrongQuestions2 = practiceStore.getWrongQuestions(2);
    
    expect(wrongQuestions1.size).toBe(2);
    expect(wrongQuestions2.size).toBe(2);
  });
  
  test('æ‡‰è©²èƒ½æ¨™è¨˜éŒ¯é¡Œç‚ºå·²æŒæ¡', async () => {
    const practiceStore = usePracticeStore();
    
    // ç”¢ç”Ÿä¸€äº›éŒ¯é¡Œ
    await practiceStore.startPracticeSession({ subjectId: 1, mode: 'quick', questionCount: 3 });
    // ... æäº¤éŒ¯èª¤ç­”æ¡ˆ
    await practiceStore.endPracticeSession();
    
    // ç²å–éŒ¯é¡Œåˆ—è¡¨
    const wrongQuestions = practiceStore.getWrongQuestions(1);
    const firstWrongQuestionId = Array.from(wrongQuestions.keys())[0];
    
    // æ¨™è¨˜ç‚ºå·²æŒæ¡
    await practiceStore.markQuestionMastered(firstWrongQuestionId);
    
    // é©—è­‰å·²å¾éŒ¯é¡Œæœ¬ç§»é™¤
    const updatedWrongQuestions = practiceStore.getWrongQuestions(1);
    expect(updatedWrongQuestions.has(firstWrongQuestionId)).toBe(false);
  });
  
  test('æ‡‰è©²èƒ½å¾éŒ¯é¡Œæœ¬ç”Ÿæˆè¤‡ç¿’ç·´ç¿’', async () => {
    const practiceStore = usePracticeStore();
    const questionStore = useQuestionStore();
    
    // ç”¢ç”ŸéŒ¯é¡Œ
    await questionStore.loadQuestions(1);
    await practiceStore.startPracticeSession({ subjectId: 1, mode: 'quick', questionCount: 5 });
    // ... æäº¤éŒ¯èª¤ç­”æ¡ˆ
    await practiceStore.endPracticeSession();
    
    // å¾éŒ¯é¡Œæœ¬é–‹å§‹è¤‡ç¿’
    const reviewSession = await practiceStore.startPracticeSession({
      subjectId: 1,
      mode: 'topic', // ä½¿ç”¨topicæ¨¡å¼å¾éŒ¯é¡Œæœ¬å‡ºé¡Œ
      topicId: null, // ç‰¹æ®Šæ¨™è¨˜è¡¨ç¤ºå¾éŒ¯é¡Œæœ¬å‡ºé¡Œ
      questionCount: 3 // å¾éŒ¯é¡Œæœ¬ä¸­é¸3é¡Œ
    });
    
    // é©—è­‰è¤‡ç¿’æœƒè©±çš„é¡Œç›®éƒ½ä¾†è‡ªéŒ¯é¡Œæœ¬
    const wrongQuestionIds = Array.from(practiceStore.getWrongQuestions(1).keys());
    
    reviewSession.questions.forEach(question => {
      expect(wrongQuestionIds).toContain(question.id);
    });
  });
});
```

### 3. é€²åº¦è¿½è¹¤æ¸¬è©¦

#### æ¸¬è©¦å¥—ä»¶: Progress Tracking
```javascript
describe('é€²åº¦è¿½è¹¤é›†æˆæ¸¬è©¦', () => {
  test('æ‡‰è©²èƒ½æ­£ç¢ºæ›´æ–°ç§‘ç›®é€²åº¦', async () => {
    const practiceStore = usePracticeStore();
    const progressStore = useProgressStore();
    
    // é–‹å§‹ä¸¦å®Œæˆä¸€å€‹ç·´ç¿’æœƒè©±
    await practiceStore.startPracticeSession({
      subjectId: 1,
      mode: 'quick',
      questionCount: 10
    });
    
    // æ¨¡æ“¬å›ç­”ï¼ˆ5å°5éŒ¯ï¼‰
    for (let i = 0; i < 10; i++) {
      await practiceStore.submitAnswer({
        questionId: practiceStore.currentSession.questions[i].id,
        answer: i < 5 ? 0 : 1 // å‰5é¡Œæ­£ç¢ºï¼Œå¾Œ5é¡ŒéŒ¯èª¤
      });
    }
    
    const finalResult = await practiceStore.endPracticeSession();
    
    // é©—è­‰é€²åº¦æ›´æ–°
    const subjectProgress = progressStore.getSubjectProgress(1);
    
    expect(subjectProgress.totalSessions).toBe(1);
    expect(subjectProgress.totalQuestions).toBe(10);
    expect(subjectProgress.correctRate).toBe(50);
    expect(subjectProgress.averageScore).toBe(50);
  });
  
  test('æ‡‰è©²èƒ½è¨ˆç®—é€£çºŒå­¸ç¿’å¤©æ•¸', async () => {
    const progressStore = useProgressStore();
    
    // æ¨¡æ“¬é€£çºŒ3å¤©å­¸ç¿’
    const today = new Date();
    const yesterday = new Date(today);
    yesterday.setDate(yesterday.getDate() - 1);
    const dayBeforeYesterday = new Date(today);
    dayBeforeYesterday.setDate(dayBeforeYesterday.getDate() - 2);
    
    // æ·»åŠ 3å¤©çš„å­¸ç¿’è¨˜éŒ„
    progressStore.updatePracticeResult({
      sessionId: 'session1',
      subjectId: 1,
      completedAt: dayBeforeYesterday,
      score: 80
    });
    
    progressStore.updatePracticeResult({
      sessionId: 'session2',
      subjectId: 1,
      completedAt: yesterday,
      score: 85
    });
    
    progressStore.updatePracticeResult({
      sessionId: 'session3',
      subjectId: 1,
      completedAt: today,
      score: 90
    });
    
    // ç²å–å­¸ç¿’å ±å‘Š
    const report = progressStore.getLearningReport(7);
    
    expect(report.consecutiveDays).toBe(3);
    expect(report.dailyProgress).toHaveLength(3);
  });
  
  test('æ‡‰è©²èƒ½ç”Ÿæˆå­¸ç¿’å ±å‘Š', async () => {
    const progressStore = useProgressStore();
    
    // æ·»åŠ å¤šå€‹ç·´ç¿’è¨˜éŒ„
    for (let i = 0; i < 5; i++) {
      progressStore.updatePracticeResult({
        sessionId: `session${i}`,
        subjectId: 1,
        completedAt: new Date(),
        totalQuestions: 10,
        correctAnswers: 7 + i, // åˆ†æ•¸é€æ¼¸æé«˜
        score: (7 + i) / 10 * 100
      });
    }
    
    // ç²å–å ±å‘Š
    const report = progressStore.getLearningReport(7);
    
    expect(report).toHaveProperty('totalSessions');
    expect(report).toHaveProperty('averageScore');
    expect(report).toHaveProperty('improvementRate');
    expect(report).toHaveProperty('weakTopics');
    
    // é©—è­‰åˆ†æ•¸æé«˜è¶¨å‹¢
    expect(report.improvementRate).toBeGreaterThan(0);
  });
});
```

## ğŸ® E2Eæ¸¬è©¦æ¡ˆä¾‹

### 1. å®Œæ•´ç”¨æˆ¶æµç¨‹æ¸¬è©¦

#### æ¸¬è©¦æ¡ˆä¾‹: æ–°ç”¨æˆ¶å®Œæ•´å­¸ç¿’æµç¨‹
```javascript
describe('æ–°ç”¨æˆ¶å®Œæ•´å­¸ç¿’æµç¨‹ E2Eæ¸¬è©¦', () => {
  test('æ‡‰è©²èƒ½å®Œæˆå¾è¨»å†Šåˆ°å­¸ç¿’çš„å…¨æµç¨‹', async ({ page }) => {
    // 1. è¨ªå•ç¶²ç«™
    await page.goto('http://localhost:5173');
    
    // 2. é¸æ“‡ç§‘ç›®
    await page.click('text=ç¤¾æœƒ');
    
    // 3. é¸æ“‡ç·´ç¿’æ¨¡å¼
    await page.click('text=å¿«é€Ÿç·´ç¿’');
    
    // 4. é–‹å§‹ç·´ç¿’
    await page.click('text=é–‹å§‹ç·´ç¿’');
    
    // 5. å›ç­”æ‰€æœ‰é¡Œç›®
    const questionCount = await page.locator('.question-number').textContent();
    const totalQuestions = parseInt(questionCount.match(/\d+/g)[1]);
    
    for (let i = 0; i < totalQuestions; i++) {
      // é¸æ“‡ç¬¬ä¸€å€‹é¸é …
      await page.click('.answer-options input[type="radio"]:first-child');
      
      // æäº¤ç­”æ¡ˆ
      await page.click('text=æäº¤ç­”æ¡ˆ');
      
      // ä¸‹ä¸€é¡Œï¼ˆå¦‚æœä¸æ˜¯æœ€å¾Œä¸€é¡Œï¼‰
      if (i < totalQuestions - 1) {
        await page.click('text=ä¸‹ä¸€é¡Œ');
      }
    }
    
    // 6. æŸ¥çœ‹çµæœ
    await page.waitForSelector('text=ç·´ç¿’å®Œæˆ');
    
    // 7. æŸ¥çœ‹éŒ¯é¡Œæœ¬
    await page.click('text=æŸ¥çœ‹éŒ¯é¡Œæœ¬');
    
    // 8. é©—è­‰éŒ¯é¡Œè¨˜éŒ„
    const wrongQuestions = await page.locator('.wrong-question-item').count();
    expect(wrongQuestions).toBeGreaterThan(0);
    
    // 9. æŸ¥çœ‹å­¸ç¿’é€²åº¦
    await page.click('text=å­¸ç¿’é€²åº¦');
    
    // 10. é©—è­‰é€²åº¦æ›´æ–°
    const progressText = await page.locator('.progress-stats').textContent();
    expect(progressText).toContain('å·²å®Œæˆç·´ç¿’');
  });
});

#### æ¸¬è©¦æ¡ˆä¾‹: éŒ¯é¡Œè¤‡ç¿’æµç¨‹
```javascript
describe('éŒ¯é¡Œè¤‡ç¿’æµç¨‹ E2Eæ¸¬è©¦', () => {
  test('æ‡‰è©²èƒ½å®ŒæˆéŒ¯é¡Œè¤‡ç¿’å…¨æµç¨‹', async ({ page }) => {
    // 1. å…ˆç”¢ç”Ÿä¸€äº›éŒ¯é¡Œ
    await page.goto('http://localhost:5173');
    await page.click('text=ç¤¾æœƒ');
    await page.click('text=å¿«é€Ÿç·´ç¿’');
    await page.click('text=é–‹å§‹ç·´ç¿’');
    
    // æ•…æ„å›ç­”éŒ¯èª¤ï¼ˆç¸½æ˜¯é¸æ“‡æœ€å¾Œä¸€å€‹é¸é …ï¼‰
    const questionCount = await page.locator('.question-number').textContent();
    const totalQuestions = parseInt(questionCount.match(/\d+/g)[1]);
    
    for (let i = 0; i < totalQuestions; i++) {
      // é¸æ“‡æœ€å¾Œä¸€å€‹é¸é …ï¼ˆå¤§æ¦‚ç‡éŒ¯èª¤ï¼‰
      const options = await page.locator('.answer-options input[type="radio"]').count();
      await page.locator(`.answer-options input[type="radio"]:nth-child(${options})`).click();
      await page.click('text=æäº¤ç­”æ¡ˆ');
      
      if (i < totalQuestions - 1) {
        await page.click('text=ä¸‹ä¸€é¡Œ');
      }
    }
    
    // 2. é€²å…¥éŒ¯é¡Œæœ¬
    await page.click('text=éŒ¯é¡Œæœ¬');
    
    // 3. é–‹å§‹éŒ¯é¡Œè¤‡ç¿’
    await page.click('text=é–‹å§‹è¤‡ç¿’');
    
    // 4. è¤‡ç¿’éŒ¯é¡Œ
    const reviewCount = await page.locator('.question-number').textContent();
    const totalReviewQuestions = parseInt(reviewCount.match(/\d+/g)[1]);
    
    for (let i = 0; i < totalReviewQuestions; i++) {
      // é€™æ¬¡èªçœŸå›ç­”ï¼ˆé¸æ“‡ç¬¬ä¸€å€‹é¸é …ï¼‰
      await page.click('.answer-options input[type="radio"]:first-child');
      await page.click('text=æäº¤ç­”æ¡ˆ');
      
      if (i < totalReviewQuestions - 1) {
        await page.click('text=ä¸‹ä¸€é¡Œ');
      }
    }
    
    // 5. æ¨™è¨˜å·²æŒæ¡çš„éŒ¯é¡Œ
    await page.click('text=æ¨™è¨˜å·²æŒæ¡');
    
    // 6. é©—è­‰éŒ¯é¡Œæ¸›å°‘
    const remainingWrongQuestions = await page.locator('.wrong-question-item').count();
    expect(remainingWrongQuestions).toBeLessThan(totalReviewQuestions);
  });
});
```

### 2. éŒ¯èª¤è™•ç†æ¸¬è©¦

#### æ¸¬è©¦æ¡ˆä¾‹: ç•°å¸¸æƒ…æ³è™•ç†
```javascript
describe('ç•°å¸¸æƒ…æ³è™•ç† E2Eæ¸¬è©¦', () => {
  test('æ‡‰è©²èƒ½è™•ç†ç¶²çµ¡ä¸­æ–·', async ({ page }) => {
    // æ¨¡æ“¬ç¶²çµ¡ä¸­æ–·
    await page.route('**/*', route => route.abort());
    
    // å˜—è©¦è¨ªå•ç¶²ç«™
    try {
      await page.goto('http://localhost:5173');
    } catch (error) {
      // é æœŸæœƒå¤±æ•—
    }
    
    // æ¢å¾©ç¶²çµ¡
    await page.unroute('**/*');
    
    // æ‡‰è©²èƒ½æ­£å¸¸è¨ªå•
    await page.goto('http://localhost:5173');
    await expect(page).toHaveURL('http://localhost:5173/');
  });
  
  test('æ‡‰è©²èƒ½è™•ç†æœ¬åœ°å­˜å„²å·²æ»¿', async ({ page }) => {
    // æ¨¡æ“¬æœ¬åœ°å­˜å„²å·²æ»¿
    await page.addInitScript(() => {
      // é‡å¯«localStorage.setItemæ¨¡æ“¬å­˜å„²å·²æ»¿
      const originalSetItem = localStorage.setItem;
      localStorage.setItem = function(key, value) {
        if (key.includes('practice') || key.includes('progress')) {
          throw new DOMException('QuotaExceededError');
        }
        return originalSetItem.call(this, key, value);
      };
    });
    
    // å˜—è©¦é€²è¡Œç·´ç¿’
    await page.goto('http://localhost:5173');
    await page.click('text=ç¤¾æœƒ');
    await page.click('text=å¿«é€Ÿç·´ç¿’');
    
    // æ‡‰è©²é¡¯ç¤ºå­˜å„²éŒ¯èª¤æç¤º
    await expect(page.locator('text=å­˜å„²ç©ºé–“ä¸è¶³')).toBeVisible();
    
    // æ‡‰è©²æä¾›æ¸…ç†é¸é …
    await page.click('text=æ¸…ç†å­˜å„²ç©ºé–“');
    await expect(page.locator('text=æ¸…ç†å®Œæˆ')).toBeVisible();
  });
  
  test('æ‡‰è©²èƒ½è™•ç†ç„¡æ•ˆçš„é¡Œç›®æ•¸æ“š', async ({ page }) => {
    // æ³¨å…¥ç„¡æ•ˆçš„é¡Œç›®æ•¸æ“š
    await page.addInitScript(() => {
      localStorage.setItem('questions_invalid', JSON.stringify([
        { id: 1, question: 'ç„¡æ•ˆé¡Œç›®', options: [] } // ç¼ºå°‘å¿…è¦å­—æ®µ
      ]));
    });
    
    // å˜—è©¦åŠ è¼‰é¡Œç›®
    await page.goto('http://localhost:5173');
    await page.click('text=ç¤¾æœƒ');
    
    // æ‡‰è©²é¡¯ç¤ºæ•¸æ“šéŒ¯èª¤æç¤º
    await expect(page.locator('text=é¡Œç›®æ•¸æ“šéŒ¯èª¤')).toBeVisible();
    
    // æ‡‰è©²æä¾›é‡ç½®é¸é …
    await page.click('text=é‡ç½®é¡Œç›®æ•¸æ“š');
    await expect(page.locator('text=é‡ç½®æˆåŠŸ')).toBeVisible();
  });
});
```

## ğŸ“Š æ€§èƒ½æ¸¬è©¦æ¡ˆä¾‹

### 1. åŠ è¼‰æ€§èƒ½æ¸¬è©¦
```javascript
describe('åŠ è¼‰æ€§èƒ½æ¸¬è©¦', () => {
  test('é¦–é åŠ è¼‰æ™‚é–“æ‡‰è©²å°æ–¼3ç§’', async ({ page }) => {
    const startTime = Date.now();
    await page.goto('http://localhost:5173');
    const loadTime = Date.now() - startTime;
    
    expect(loadTime).toBeLessThan(3000);
  });
  
  test('é¡Œç›®åŠ è¼‰æ™‚é–“æ‡‰è©²å°æ–¼2ç§’', async ({ page }) => {
    await page.goto('http://localhost:5173');
    
    const startTime = Date.now();
    await page.click('text=ç¤¾æœƒ');
    await page.waitForSelector('.question-card', { timeout: 2000 });
    const loadTime = Date.now() - startTime;
    
    expect(loadTime).toBeLessThan(2000);
  });
  
  test('å¤§é‡é¡Œç›®æ‡‰è©²èƒ½æµæš¢æ»¾å‹•', async ({ page }) => {
    // åŠ è¼‰å¤§é‡é¡Œç›®ï¼ˆéŒ¯é¡Œæœ¬å ´æ™¯ï¼‰
    await page.addInitScript(() => {
      // æ¨¡æ“¬100å€‹éŒ¯é¡Œ
      const wrongQuestions = [];
      for (let i = 0; i < 100; i++) {
        wrongQuestions.push({
          id: i,
          question: `éŒ¯é¡Œ ${i}`,
          explanation: `è§£æ ${i}`
        });
      }
      localStorage.setItem('wrong_questions', JSON.stringify(wrongQuestions));
    });
    
    await page.goto('http://localhost:5173');
    await page.click('text=éŒ¯é¡Œæœ¬');
    
    // æ¸¬è©¦æ»¾å‹•æ€§èƒ½
    const list = page.locator('.wrong-questions-list');
    await list.evaluate(el => {
      el.scrollTop = el.scrollHeight;
    });
    
    // æ‡‰è©²æ²’æœ‰æ˜é¡¯å¡é “
    await expect(page).not.toHaveSelector('.loading-spinner');
  });
});

### 2. å…§å­˜ä½¿ç”¨æ¸¬è©¦
```javascript
describe('å…§å­˜ä½¿ç”¨æ¸¬è©¦', () => {
  test('é•·æ™‚é–“ä½¿ç”¨ä¸æ‡‰è©²å…§å­˜æ´©æ¼', async ({ page }) => {
    await page.goto('http://localhost:5173');
    
    // æ¨¡æ“¬é•·æ™‚é–“ä½¿ç”¨ï¼šå¤šæ¬¡ç·´ç¿’
    for (let i = 0; i < 10; i++) {
      await page.click('text=ç¤¾æœƒ');
      await page.click('text=å¿«é€Ÿç·´ç¿’');
      await page.click('text=é–‹å§‹ç·´ç¿’');
      
      // å¿«é€Ÿå®Œæˆç·´ç¿’
      await page.click('.answer-options input[type="radio"]:first-child');
      await page.click('text=æäº¤ç­”æ¡ˆ');
      await page.click('text=çµæŸç·´ç¿’');
      
      await page.click('text=è¿”å›é¦–é ');
    }
    
    // ç²å–å…§å­˜ä½¿ç”¨æƒ…æ³ï¼ˆé€šéperformance APIï¼‰
    const memoryUsage = await page.evaluate(() => {
      if (window.performance && window.performance.memory) {
        return window.performance.memory.usedJSHeapSize;
      }
      return null;
    });
    
    // å…§å­˜ä½¿ç”¨æ‡‰è©²åœ¨åˆç†ç¯„åœå…§ï¼ˆä¾‹å¦‚ < 100MBï¼‰
    if (memoryUsage) {
      expect(memoryUsage).toBeLessThan(100 * 1024 * 1024); // 100MB
    }
  });
});
```

## ğŸ“± å…¼å®¹æ€§æ¸¬è©¦çŸ©é™£

### ç€è¦½å™¨å…¼å®¹æ€§æ¸¬è©¦
| ç€è¦½å™¨ | ç‰ˆæœ¬ | æ¸¬è©¦çµæœ | å•é¡Œè¨˜éŒ„ |
|--------|------|----------|----------|
| Chrome | æœ€æ–° | âœ… é€šé | ç„¡ |
| Firefox | æœ€æ–° | âœ… é€šé | ç„¡ |
| Safari | æœ€æ–° | âœ… é€šé | ç„¡ |
| Edge | æœ€æ–° | âœ… é€šé | ç„¡ |

### ç§»å‹•è¨­å‚™æ¸¬è©¦
| è¨­å‚™ | ç³»çµ± | ç€è¦½å™¨ | æ¸¬è©¦çµæœ |
|------|------|--------|----------|
| iPhone 15 | iOS 17 | Safari | âœ… é€šé |
| Samsung Galaxy S23 | Android 14 | Chrome | âœ… é€šé |
| iPad Pro | iPadOS 17 | Safari | âœ… é€šé |
| Pixel 7 | Android 14 | Chrome | âœ… é€šé |

### å±å¹•å°ºå¯¸æ¸¬è©¦
| å°ºå¯¸ | åˆ†è¾¨ç‡ | æ¸¬è©¦çµæœ | å•é¡Œè¨˜éŒ„ |
|------|--------|----------|----------|
| æ‰‹æ©Ÿå°å± | 375x667 | âœ… é€šé | ç„¡ |
| æ‰‹æ©Ÿå¤§å± | 414x896 | âœ… é€šé | ç„¡ |
| å¹³æ¿ | 768x1024 | âœ… é€šé | ç„¡ |
| æ¡Œé¢ | 1920x1080 | âœ… é€šé | ç„¡ |

## ğŸš€ æ¸¬è©¦åŸ·è¡Œè¨ˆåŠƒ

### 1. æœ¬åœ°é–‹ç™¼æ¸¬è©¦
```bash
# é‹è¡Œæ‰€æœ‰æ¸¬è©¦
npm run test

# é‹è¡Œå–®å…ƒæ¸¬è©¦
npm run test:unit

# é‹è¡Œé›†æˆæ¸¬è©¦
npm run test:integration

# é‹è¡ŒE2Eæ¸¬è©¦
npm run test:e2e

# ç”Ÿæˆæ¸¬è©¦å ±å‘Š
npm run test:report
```

### 2. CI/CD æ¸¬è©¦æµç¨‹
```yaml
# GitHub Actions é…ç½®ç¤ºä¾‹
name: Test Suite
on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Setup Node.js
      uses: actions/setup-node@v3
      with:
        node-version: '18'
        
    - name: Install dependencies
      run: npm ci
      
    - name: Run unit tests
      run: npm run test:unit
      
    - name: Run integration tests
      run: npm run test:integration
      
    - name: Run E2E tests
      run: npm run test:e2e
      
    - name: Upload test results
      uses: actions/upload-artifact@v3
      with:
        name: test-results
        path: test-results/
```

### 3. æ¸¬è©¦å ±å‘Šæ ¼å¼
```json
{
  "summary": {
    "totalTests": 150,
    "passed": 145,
    "failed": 5,
    "skipped": 0,
    "duration": "2m 30s",
    "coverage": "85%"
  },
  "suites": [
    {
      "name": "Practice Store",
      "tests": 30,
      "passed": 28,
      "failed": 2,
      "duration": "45s"
    },
    {
      "name": "Scoring System",
      "tests": 25,
      "passed": 25,
      "failed": 0,
      "duration": "30s"
    }
  ],
  "failedTests": [
    {
      "name": "æ‡‰è©²èƒ½è™•ç†ç¶²çµ¡ä¸­æ–·",
      "suite": "ç•°å¸¸æƒ…æ³è™•ç† E2Eæ¸¬è©¦",
      "error": "TimeoutError: Timeout 30000ms exceeded",
      "stack": "..."
    }
  ]
}
```

## ğŸ“ æ¸¬è©¦æ•¸æ“šæº–å‚™

### æ¸¬è©¦é¡Œç›®æ•¸æ“š
```javascript
// tests/fixtures/questions.js
export const testQuestions = [
  {
    id: 1,
    subjectId: 1,
    topicId: 1,
    type: 'single',
    question: 'æ¸¬è©¦å–®é¸é¡Œ',
    options: ['é¸é …A', 'é¸é …B', 'é¸é …C', 'é¸é …D'],
    answer: 0,
    explanation: 'é€™æ˜¯æ­£ç¢ºç­”æ¡ˆçš„è§£æ',
    difficulty: 'easy'
  },
  {
    id: 2,
    subjectId: 1,
    topicId: 1,
    type: 'multiple',
    question: 'æ¸¬è©¦å¤šé¸é¡Œ',
    options: ['é¸é …A', 'é¸é …B', 'é¸é …C', 'é¸é …D'],
    answer: [0, 2],
    explanation: 'é€™æ˜¯å¤šé¸é¡Œè§£æ',
    difficulty: 'medium'
  },
  {
    id: 3,
    subjectId: 1,
    topicId: 2,
    type: 'truefalse',
    question: 'æ¸¬è©¦åˆ¤æ–·é¡Œ',
    options: ['æ­£ç¢º', 'éŒ¯èª¤'],
    answer: true,
    explanation: 'åˆ¤æ–·é¡Œè§£æ',
    difficulty: 'easy'
  }
];
```

### æ¸¬è©¦ç”¨æˆ¶æ•¸æ“š
```javascript
// tests/fixtures/user-data.js
export const testUserData = {
  practiceHistory: [
    {
      sessionId: 'test_session_1',
      subjectId: 1,
      completedAt: '2026-02-14T08:00:00Z',
      totalQuestions: 10,
      correctAnswers: 8,
      score: 80
    }
  ],
  wrongQuestions: new Map([
    [1, { count: 2, lastWrong: '2026-02-14T08:00:00Z' }],
    [3, { count: 1, lastWrong: '2026-02-14T08:00:00Z' }]
  ]),
  progress: {
    subjectId: 1,
    totalSessions: 5,
    totalQuestions: 50,
    correctRate: 75,
    averageScore: 75
  }
};
```

## ğŸ¯ æ¸¬è©¦è³ªé‡æŒ‡æ¨™

### é€šéæ¨™æº–
1. **æ¸¬è©¦è¦†è“‹ç‡**: > 80%
2. **å–®å…ƒæ¸¬è©¦é€šéç‡**: 100%
3. **é›†æˆæ¸¬è©¦é€šéç‡**: > 95%
4. **E2Eæ¸¬è©¦é€šéç‡**: > 90%
5. **æ€§èƒ½æŒ‡æ¨™**: é é¢åŠ è¼‰ < 3ç§’

### æ¸¬è©¦å ±å‘Šè¦æ±‚
- æ¯æ¬¡æäº¤å¿…é ˆé€šéæ‰€æœ‰æ¸¬è©¦
- æ¸¬è©¦å¤±æ•—å¿…é ˆä¿®å¾©å¾Œæ‰èƒ½åˆä½µ
- å®šæœŸæ›´æ–°æ¸¬è©¦æ¡ˆä¾‹
- æ¸¬è©¦æ–‡æª”ä¿æŒæœ€æ–°

---

**æ–‡æª”ç‰ˆæœ¬**: 1.0  
**æœ€å¾Œæ›´æ–°**: 2026-02-14 08:05 UTC  
**ç‹€æ…‹**: âœ… å®Œæˆ - å¯ä¾›æ¸¬è©¦åœ˜éšŠä½¿ç”¨
