# ç§‘ç›®ç·´ç¿’åŠŸèƒ½ - é–‹ç™¼è¦æ ¼èªªæ˜

## ğŸ¯ å°ˆæ¡ˆæ¦‚è¿°

### ç›®æ¨™
ç‚ºåœ‹ä¸­æœƒè€ƒç¸½è¤‡ç¿’ç³»çµ±é–‹ç™¼å®Œæ•´çš„ç§‘ç›®ç·´ç¿’åŠŸèƒ½ï¼Œæä¾›5å¤§ç§‘ç›®çš„ç·´ç¿’ã€è©•åˆ†ã€éŒ¯é¡Œè¨˜éŒ„å’Œé€²åº¦è¿½è¹¤åŠŸèƒ½ã€‚

### æŠ€è¡“æ£§
- **å‰ç«¯æ¡†æ¶**: Vue.js 3.4+
- **UIæ¡†æ¶**: Vuetify 3.5+
- **ç‹€æ…‹ç®¡ç†**: Pinia 2.1+
- **è·¯ç”±ç®¡ç†**: Vue Router 4.2+
- **æ§‹å»ºå·¥å…·**: Vite 5.0+
- **æ¸¬è©¦æ¡†æ¶**: Vitest + Vue Test Utils
- **éƒ¨ç½²å¹³å°**: GitHub Pages

## ğŸ—ï¸ ç³»çµ±æ¶æ§‹

### æ•´é«”æ¶æ§‹
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               å‰ç«¯æ‡‰ç”¨å±¤ (Vue.js)            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ è¦–åœ–å±¤ (Views)       â”‚ çµ„ä»¶å±¤ (Components)   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          ç‹€æ…‹ç®¡ç†å±¤ (Pinia Stores)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          æ¥­å‹™é‚è¼¯å±¤ (Services)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          æ•¸æ“šæŒä¹…åŒ–å±¤ (LocalStorage)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ¨¡å¡ŠåŠƒåˆ†

#### 1. ç·´ç¿’ç®¡ç†æ¨¡å¡Š
- ç·´ç¿’æœƒè©±ç®¡ç†
- é¡Œç›®éš¨æ©ŸåŒ–ç®—æ³•
- è©•åˆ†ç³»çµ±
- éŒ¯é¡Œè¨˜éŒ„

#### 2. é¡Œç›®ç®¡ç†æ¨¡å¡Š
- é¡Œç›®åŠ è¼‰èˆ‡ç·©å­˜
- é¡Œç›®åˆ†é¡èˆ‡éæ¿¾
- é¡Œç›®é›£åº¦ç®¡ç†
- é¡Œç›®æœç´¢

#### 3. é€²åº¦è¿½è¹¤æ¨¡å¡Š
- å­¸ç¿’çµ±è¨ˆ
- æˆç¸¾åˆ†æ
- æˆå°±ç³»çµ±
- å ±å‘Šç”Ÿæˆ

#### 4. ç”¨æˆ¶ç•Œé¢æ¨¡å¡Š
- ç·´ç¿’ç•Œé¢
- çµæœå±•ç¤º
- éŒ¯é¡Œæœ¬ç•Œé¢
- é€²åº¦å ±å‘Šç•Œé¢

## ğŸ“ é …ç›®çµæ§‹

### ç›®éŒ„çµæ§‹
```
geography-review-website/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ practice/          # ç·´ç¿’ç›¸é—œçµ„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ QuestionCard.vue      # é¡Œç›®å¡ç‰‡
â”‚   â”‚   â”‚   â”œâ”€â”€ AnswerOptions.vue     # ç­”æ¡ˆé¸é …
â”‚   â”‚   â”‚   â”œâ”€â”€ ProgressBar.vue       # é€²åº¦æ¢
â”‚   â”‚   â”‚   â”œâ”€â”€ TimerDisplay.vue      # è¨ˆæ™‚å™¨
â”‚   â”‚   â”‚   â””â”€â”€ ResultDisplay.vue     # çµæœé¡¯ç¤º
â”‚   â”‚   â””â”€â”€ subjects/          # ç§‘ç›®å°ˆç”¨çµ„ä»¶
â”‚   â”‚       â”œâ”€â”€ ChinesePractice.vue   # åœ‹æ–‡ç·´ç¿’
â”‚   â”‚       â”œâ”€â”€ EnglishPractice.vue   # è‹±èªç·´ç¿’
â”‚   â”‚       â”œâ”€â”€ MathPractice.vue      # æ•¸å­¸ç·´ç¿’
â”‚   â”‚       â”œâ”€â”€ SciencePractice.vue   # è‡ªç„¶ç·´ç¿’
â”‚   â”‚       â””â”€â”€ SocialPractice.vue    # ç¤¾æœƒç·´ç¿’
â”‚   â”œâ”€â”€ stores/
â”‚   â”‚   â”œâ”€â”€ practice.store.js  # ç·´ç¿’ç‹€æ…‹ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ question.store.js  # é¡Œç›®æ•¸æ“šç®¡ç†
â”‚   â”‚   â””â”€â”€ progress.store.js  # é€²åº¦è¿½è¹¤ç®¡ç†
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ question-generator.js     # é¡Œç›®ç”Ÿæˆå™¨
â”‚   â”‚   â”œâ”€â”€ scoring-system.js         # è©•åˆ†ç³»çµ±
â”‚   â”‚   â”œâ”€â”€ data-validator.js         # æ•¸æ“šé©—è­‰å™¨
â”‚   â”‚   â””â”€â”€ storage-manager.js        # å­˜å„²ç®¡ç†å™¨
â”‚   â”œâ”€â”€ views/
â”‚   â”‚   â”œâ”€â”€ SubjectPracticeView.vue   # ç§‘ç›®ç·´ç¿’é é¢
â”‚   â”‚   â””â”€â”€ NewPracticeView.vue       # æ–°ç·´ç¿’ä¸­å¿ƒ
â”‚   â””â”€â”€ data/
â”‚       â”œâ”€â”€ subjects.js        # ç§‘ç›®å®šç¾©
â”‚       â”œâ”€â”€ question-manager.js # é¡Œç›®ç®¡ç†å™¨
â”‚       â””â”€â”€ expanded-geography-quizzes.js # æ“´å……é¡Œåº«
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ unit/                  # å–®å…ƒæ¸¬è©¦
â”‚   â”œâ”€â”€ integration/           # é›†æˆæ¸¬è©¦
â”‚   â””â”€â”€ e2e/                   # ç«¯åˆ°ç«¯æ¸¬è©¦
â””â”€â”€ docs/                      # æ–‡æª”
```

## ğŸ”§ æŠ€è¡“è¦æ ¼

### 1. ç‹€æ…‹ç®¡ç†è¦æ ¼

#### Practice Store (`practice.store.js`)
```javascript
// ç‹€æ…‹å®šç¾©
const state = () => ({
  // ç•¶å‰ç·´ç¿’æœƒè©±
  currentSession: null,
  
  // ç·´ç¿’æ­·å²
  sessionHistory: [],
  
  // éŒ¯é¡Œè¨˜éŒ„ (Mapçµæ§‹: questionId -> éŒ¯èª¤ä¿¡æ¯)
  wrongQuestions: new Map(),
  
  // ç§‘ç›®é€²åº¦
  subjectProgress: {},
  
  // åŠ è¼‰ç‹€æ…‹
  isLoading: false,
  
  // éŒ¯èª¤ä¿¡æ¯
  error: null
});

// Actions è¦æ ¼
const actions = {
  /**
   * é–‹å§‹æ–°çš„ç·´ç¿’æœƒè©±
   * @param {Object} params - åƒæ•¸
   * @param {number} params.subjectId - ç§‘ç›®ID
   * @param {string} params.mode - ç·´ç¿’æ¨¡å¼
   * @param {number} [params.topicId] - ä¸»é¡ŒID
   * @param {number} [params.questionCount] - é¡Œç›®æ•¸é‡
   */
  async startPracticeSession({ commit }, params) {},
  
  /**
   * æäº¤ç­”æ¡ˆ
   * @param {number} questionId - é¡Œç›®ID
   * @param {any} answer - ç”¨æˆ¶ç­”æ¡ˆ
   */
  async submitAnswer({ commit }, { questionId, answer }) {},
  
  /**
   * çµæŸç•¶å‰ç·´ç¿’æœƒè©±
   */
  async endPracticeSession({ commit, state }) {},
  
  /**
   * ç²å–éŒ¯é¡Œåˆ—è¡¨
   * @param {number} subjectId - ç§‘ç›®ID
   * @param {number} limit - è¿”å›æ•¸é‡é™åˆ¶
   */
  async getWrongQuestions({ state }, { subjectId, limit }) {},
  
  /**
   * æ¨™è¨˜éŒ¯é¡Œç‚ºå·²æŒæ¡
   * @param {number} questionId - é¡Œç›®ID
   */
  async markQuestionMastered({ commit }, questionId) {}
};
```

#### Question Store (`question.store.js`)
```javascript
// ç‹€æ…‹å®šç¾©
const state = () => ({
  // é¡Œç›®åº« (Mapçµæ§‹: questionId -> question)
  questionBank: new Map(),
  
  // æŒ‰ç§‘ç›®åˆ†é¡çš„é¡Œç›®
  subjectQuestions: {},
  
  // æŒ‰ä¸»é¡Œåˆ†é¡çš„é¡Œç›®
  topicQuestions: {},
  
  // é¡Œç›®ç·©å­˜ (LRUç·©å­˜)
  questionCache: new Map(),
  
  // åŠ è¼‰ç‹€æ…‹
  isLoading: false
});

// Actions è¦æ ¼
const actions = {
  /**
   * åŠ è¼‰ç§‘ç›®é¡Œç›®
   * @param {number} subjectId - ç§‘ç›®ID
   */
  async loadQuestions({ commit }, subjectId) {},
  
  /**
   * ç²å–éš¨æ©Ÿé¡Œç›®
   * @param {Object} params - åƒæ•¸
   * @param {number} params.subjectId - ç§‘ç›®ID
   * @param {number} params.count - é¡Œç›®æ•¸é‡
   * @param {number} [params.topicId] - ä¸»é¡ŒID
   */
  async getRandomQuestions({ state }, params) {},
  
  /**
   * æ ¹æ“šIDç²å–é¡Œç›®
   * @param {number} questionId - é¡Œç›®ID
   */
  async getQuestionById({ state }, questionId) {},
  
  /**
   * æ ¹æ“šé›£åº¦ç²å–é¡Œç›®
   * @param {Object} params - åƒæ•¸
   * @param {number} params.subjectId - ç§‘ç›®ID
   * @param {string} params.difficulty - é›£åº¦ç­‰ç´š
   * @param {number} params.count - é¡Œç›®æ•¸é‡
   */
  async getQuestionsByDifficulty({ state }, params) {}
};
```

### 2. çµ„ä»¶è¦æ ¼

#### QuestionCard çµ„ä»¶
```vue
<template>
  <!-- é¡Œç›®å¡ç‰‡æ¨¡æ¿ -->
  <div class="question-card">
    <!-- é¡Œç›®ç·¨è™Ÿå’Œé€²åº¦ -->
    <div class="question-header">
      <span class="question-number">ç¬¬ {{ questionNumber }} é¡Œ / å…± {{ totalQuestions }} é¡Œ</span>
      <progress-bar :progress="progress" />
    </div>
    
    <!-- é¡Œç›®å…§å®¹ -->
    <div class="question-content">
      <div class="question-text" v-html="formattedQuestion" />
      
      <!-- ç­”æ¡ˆé¸é … -->
      <answer-options
        :options="question.options"
        :question-type="question.type"
        :selected-answer="selectedAnswer"
        :disabled="isSubmitted"
        @change="handleAnswerChange"
      />
    </div>
    
    <!-- æ“ä½œæŒ‰éˆ• -->
    <div class="question-actions">
      <v-btn
        :disabled="!selectedAnswer || isSubmitted"
        @click="handleSubmit"
      >
        {{ submitButtonText }}
      </v-btn>
      
      <v-btn
        v-if="showNextButton"
        @click="handleNext"
      >
        ä¸‹ä¸€é¡Œ
      </v-btn>
    </div>
    
    <!-- ç­”æ¡ˆè§£æ -->
    <div v-if="showExplanation" class="explanation">
      <h4>è§£æï¼š</h4>
      <div v-html="question.explanation" />
    </div>
  </div>
</template>

<script setup>
// Props å®šç¾©
const props = defineProps({
  question: {
    type: Object,
    required: true,
    validator: (value) => {
      return value.id && value.question && value.options;
    }
  },
  questionNumber: {
    type: Number,
    required: true
  },
  totalQuestions: {
    type: Number,
    required: true
  },
  onSubmit: {
    type: Function,
    required: true
  },
  onNext: {
    type: Function,
    default: null
  }
});

// ç‹€æ…‹
const selectedAnswer = ref(null);
const isSubmitted = ref(false);
const showExplanation = ref(false);

// è¨ˆç®—å±¬æ€§
const progress = computed(() => {
  return (props.questionNumber / props.totalQuestions) * 100;
});

const submitButtonText = computed(() => {
  return isSubmitted.value ? 'å·²æäº¤' : 'æäº¤ç­”æ¡ˆ';
});

const showNextButton = computed(() => {
  return isSubmitted.value && props.onNext;
});

// æ–¹æ³•
const handleAnswerChange = (answer) => {
  selectedAnswer.value = answer;
};

const handleSubmit = async () => {
  if (!selectedAnswer.value || isSubmitted.value) return;
  
  isSubmitted.value = true;
  showExplanation.value = true;
  
  // èª¿ç”¨çˆ¶çµ„ä»¶æäº¤æ–¹æ³•
  await props.onSubmit(props.question.id, selectedAnswer.value);
};

const handleNext = () => {
  if (props.onNext) {
    props.onNext();
  }
};

// æ ¼å¼åŒ–é¡Œç›®æ–‡æœ¬ï¼ˆè™•ç†HTMLå’Œæ•¸å­¸å…¬å¼ï¼‰
const formattedQuestion = computed(() => {
  return formatQuestionText(props.question.question);
});
</script>

<style scoped>
.question-card {
  padding: 20px;
  border-radius: 8px;
  background: white;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.question-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
}

.question-number {
  font-size: 16px;
  font-weight: 500;
  color: #666;
}

.question-content {
  margin-bottom: 20px;
}

.question-text {
  font-size: 18px;
  line-height: 1.6;
  margin-bottom: 20px;
  color: #333;
}

.question-actions {
  display: flex;
  gap: 10px;
  margin-top: 20px;
}

.explanation {
  margin-top: 20px;
  padding: 15px;
  background: #f8f9fa;
  border-radius: 6px;
  border-left: 4px solid #2196f3;
}

.explanation h4 {
  margin: 0 0 10px 0;
  color: #2196f3;
}
</style>
```

#### AnswerOptions çµ„ä»¶
```vue
<template>
  <div class="answer-options">
    <!-- å–®é¸é¡Œ -->
    <div v-if="questionType === 'single'" class="single-options">
      <v-radio-group v-model="selected">
        <v-radio
          v-for="(option, index) in options"
          :key="index"
          :label="`${String.fromCharCode(65 + index)}. ${option}`"
          :value="index"
          :disabled="disabled"
        />
      </v-radio-group>
    </div>
    
    <!-- å¤šé¸é¡Œ -->
    <div v-else-if="questionType === 'multiple'" class="multiple-options">
      <v-checkbox
        v-for="(option, index) in options"
        :key="index"
        v-model="selectedMultiple"
        :label="`${String.fromCharCode(65 + index)}. ${option}`"
        :value="index"
        :disabled="disabled"
      />
    </div>
    
    <!-- åˆ¤æ–·é¡Œ -->
    <div v-else-if="questionType === 'truefalse'" class="truefalse-options">
      <v-radio-group v-model="selected">
        <v-radio label="æ­£ç¢º" :value="true" :disabled="disabled" />
        <v-radio label="éŒ¯èª¤" :value="false" :disabled="disabled" />
      </v-radio-group>
    </div>
  </div>
</template>

<script setup>
import { computed, watch } from 'vue';

const props = defineProps({
  options: {
    type: Array,
    required: true,
    default: () => []
  },
  questionType: {
    type: String,
    required: true,
    validator: (value) => ['single', 'multiple', 'truefalse'].includes(value)
  },
  selectedAnswer: {
    type: [Number, Array, Boolean],
    default: null
  },
  disabled: {
    type: Boolean,
    default: false
  }
});

const emit = defineEmits(['change']);

// ç‹€æ…‹
const selected = ref(props.selectedAnswer);
const selectedMultiple = ref(props.selectedAnswer || []);

// ç›£è½é¸æ“‡è®ŠåŒ–
watch(selected, (newValue) => {
  emit('change', newValue);
});

watch(selectedMultiple, (newValue) => {
  emit('change', newValue);
});

// ç›£è½å¤–éƒ¨selectedAnswerè®ŠåŒ–
watch(() => props.selectedAnswer, (newValue) => {
  if (props.questionType === 'multiple') {
    selectedMultiple.value = newValue || [];
  } else {
    selected.value = newValue;
  }
});
</script>

<style scoped>
.answer-options {
  margin: 20px 0;
}

.single-options,
.multiple-options,
.truefalse-options {
  display: flex;
  flex-direction: column;
  gap: 12px;
}
</style>
```

### 3. å·¥å…·å‡½æ•¸è¦æ ¼

#### è©•åˆ†ç³»çµ± (`scoring-system.js`)
```javascript
/**
 * è©•åˆ†ç³»çµ±å·¥å…·å‡½æ•¸
 */

/**
 * æª¢æŸ¥ç­”æ¡ˆæ˜¯å¦æ­£ç¢º
 * @param {Object} question - é¡Œç›®å°è±¡
 * @param {any} userAnswer - ç”¨æˆ¶ç­”æ¡ˆ
 * @returns {Object} è©•åˆ†çµæœ
 */
export function checkAnswer(question, userAnswer) {
  const { type, answer: correctAnswer } = question;
  
  switch (type) {
    case 'single':
      return checkSingleAnswer(correctAnswer, userAnswer);
      
    case 'multiple':
      return checkMultipleAnswer(correctAnswer, userAnswer);
      
    case 'truefalse':
      return checkTrueFalseAnswer(correctAnswer, userAnswer);
      
    case 'matching':
      return checkMatchingAnswer(correctAnswer, userAnswer);
      
    default:
      throw new Error(`ä¸æ”¯æŒçš„é¡Œå‹: ${type}`);
  }
}

/**
 * æª¢æŸ¥å–®é¸é¡Œç­”æ¡ˆ
 */
function checkSingleAnswer(correctAnswer, userAnswer) {
  const isCorrect = correctAnswer === userAnswer;
  
  return {
    isCorrect,
    correctAnswer,
    userAnswer,
    score: isCorrect ? 1 : 0
  };
}

/**
 * æª¢æŸ¥å¤šé¸é¡Œç­”æ¡ˆ
 */
function checkMultipleAnswer(correctAnswer, userAnswer) {
  // ç¢ºä¿æ•¸çµ„æ ¼å¼
  const correct = Array.isArray(correctAnswer) ? correctAnswer : [correctAnswer];
  const user = Array.isArray(userAnswer) ? userAnswer : [userAnswer];
  
  // æ’åºå¾Œæ¯”è¼ƒ
  const sortedCorrect = [...correct].sort((a, b) => a - b);
  const sortedUser = [...user].sort((a, b) => a - b);
  
  const isCorrect = 
    sortedCorrect.length === sortedUser.length &&
    sortedCorrect.every((value, index) => value === sortedUser[index]);
  
  return {
    isCorrect,
    correctAnswer: sortedCorrect,
    userAnswer: sortedUser,
    score: isCorrect ? 1 : 0
  };
}

/**
 * è¨ˆç®—ç·´ç¿’æœƒè©±ç¸½åˆ†
 * @param {Array} results - æ¯é¡Œè©•åˆ†çµæœ
 * @returns {Object} ç¸½åˆ†çµ±è¨ˆ
 */
export function calculateTotalScore(results) {
  const totalQuestions = results.length;
  const correctAnswers = results.filter(r => r.isCorrect).length;
  const score = (correctAnswers / totalQuestions) * 100;
  
  return {
    totalQuestions,
    correctAnswers,
    score: Math.round(score * 100) / 100, // ä¿ç•™å…©ä½å°æ•¸
    wrongAnswers: totalQuestions - correctAnswers
  };
}
```

#### é¡Œç›®ç”Ÿæˆå™¨ (`question-generator.js`)
```javascript
/**
 * é¡Œç›®ç”Ÿæˆå™¨å·¥å…·å‡½æ•¸
 */

/**
 * å¾é¡Œåº«ä¸­éš¨æ©Ÿé¸æ“‡é¡Œç›®
 * @param {Array} questions - é¡Œç›®æ•¸çµ„
 * @param {number} count - éœ€è¦é¸æ“‡çš„é¡Œç›®æ•¸é‡
 * @param {Object} options - é¸é …
 * @param {number} [options.topicId] - ä¸»é¡ŒIDéæ¿¾
 * @param {string} [options.difficulty] - é›£åº¦éæ¿¾
 * @returns {Array} éš¨æ©Ÿé¸æ“‡çš„é¡Œç›®
 */
export function getRandomQuestions(questions, count, options = {}) {
  // éæ¿¾é¡Œç›®
  let filteredQuestions = [...questions];
  
  if (options.topicId) {
    filteredQuestions = filteredQuestions.filter(q => q.topicId === options.topicId);
  }
  
  if (options.difficulty) {
    filteredQuestions = filteredQuestions.filter(q => q.difficulty === options.difficulty);
  }
  
  // æª¢æŸ¥é¡Œç›®æ•¸é‡æ˜¯å¦è¶³å¤ 
  if (filteredQuestions.length < count) {
    console.warn(`é¡Œç›®æ•¸é‡ä¸è¶³: éœ€è¦ ${count} é¡Œï¼Œåªæœ‰ ${filteredQuestions.length} é¡Œå¯ç”¨`);
    count = Math.min(count, filteredQuestions.length);
  }
  
  // éš¨æ©Ÿé¸æ“‡
  const selected = [];
  const available = [...filteredQuestions];
  
  for (let i = 0; i < count; i++) {
    if (available.length === 0) break;
    
    const randomIndex = Math.floor(Math.random() * available.length);
    selected.push(available[randomIndex]);
    available.splice(randomIndex, 1);
  }
  
  return selected;
}

/**
 * æ‰“äº‚é¡Œç›®é †åº
 * @param {Array} questions - é¡Œç›®æ•¸çµ„
 * @returns {Array} æ‰“äº‚é †åºå¾Œçš„é¡Œç›®
 */
export function shuffleQuestions(questions) {
  const shuffled = [...questions];
  
  for (let i = shuffled.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
  }
  
  return shuffled;
}

/**
 * æ‰“äº‚é¸é …é †åº
 * @param {Array} options - é¸é …æ•¸çµ„
 * @returns {Object} æ‰“äº‚å¾Œçš„é¸é …å’Œæ˜ å°„é—œä¿‚
 */
export function shuffleOptions(options) {
  const indices = options.map((_, index) => index);
  
  // æ‰“äº‚ç´¢å¼•
  for (let i = indices.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [indices[i], indices[j]] = [indices[j], indices[i]];
  }
  
  // å‰µå»ºæ–°é¸é …é †åº
  const shuffledOptions = indices.map(index => options[index]);
  
  // å‰µå»ºæ˜ å°„é—œä¿‚ (æ–°ç´¢å¼• -> åŸç´¢å¼•)
  const mapping = {};
  indices.forEach((originalIndex, newIndex) => {
    mapping[newIndex] = originalIndex;
  });
  
  return {
    options: shuffledOptions,
    mapping
  };
}
```

#### æ•¸æ“šé©—è­‰å™¨ (`data-validator.js`)
```javascript
/**
 * æ•¸æ“šé©—è­‰å·¥å…·å‡½æ•¸
 */

/**
 * é©—è­‰é¡Œç›®æ•¸æ“š
 * @param {Object} question - é¡Œç›®å°è±¡
 * @returns {Object} é©—è­‰çµæœ
 */
export function validateQuestion(question) {
  const errors = [];
  
  // æª¢æŸ¥å¿…è¦å­—æ®µ
  const requiredFields = ['id', 'subjectId', 'type', 'question', 'options', 'answer'];
  requiredFields.forEach(field => {
    if (!question[field] && question[field] !== 0) {
      errors.push(`ç¼ºå°‘å¿…è¦å­—æ®µ: ${field}`);
    }
  });
  
  // æª¢æŸ¥é¡Œå‹
  const validTypes = ['single', 'multiple', 'truefalse', 'matching'];
  if (!validTypes.includes(question.type)) {
    errors.push(`ç„¡æ•ˆçš„é¡Œå‹: ${question.type}`);
  }
  
  // æª¢æŸ¥é¸é …
  if (!Array.isArray(question.options) || question.options.length === 0) {
    errors.push('é¸é …å¿…é ˆæ˜¯éç©ºæ•¸çµ„');
  }
  
  // æ ¹æ“šé¡Œå‹æª¢æŸ¥ç­”æ¡ˆæ ¼å¼
  switch (question.type) {
    case 'single':
      if (typeof question.answer !== 'number' || 
          question.answer < 0 || 
          question.answer >= question.options.length) {
        errors.push('å–®é¸é¡Œç­”æ¡ˆå¿…é ˆæ˜¯æœ‰æ•ˆçš„é¸é …ç´¢å¼•');
      }
      break;
      
    case 'multiple':
      if (!Array.isArray(question.answer) || 
          question.answer.length === 0 ||
          !question.answer.every(idx => 
            typeof idx === 'number' && idx >= 0 && idx < question.options.length)) {
        errors.push('å¤šé¸é¡Œç­”æ¡ˆå¿…é ˆæ˜¯æœ‰æ•ˆçš„é¸é …ç´¢å¼•æ•¸çµ„');
      }
      break;
      
    case 'truefalse':
      if (typeof question.answer !== 'boolean') {
        errors.push('åˆ¤æ–·é¡Œç­”æ¡ˆå¿…é ˆæ˜¯å¸ƒçˆ¾å€¼');
      }
      break;
      
    case 'matching':
      if (!Array.isArray(question.answer) || 
          !question.answer.every(pair => 
            Array.isArray(pair) && pair.length === 2)) {
        errors.push('é…å°é¡Œç­”æ¡ˆå¿…é ˆæ˜¯äºŒç¶­æ•¸çµ„');
      }
      break;
  }
  
  return {
    isValid: errors.length === 0,
    errors
  };
}

/**
 * é©—è­‰ç·´ç¿’æœƒè©±åƒæ•¸
 * @param {Object} params - åƒæ•¸å°è±¡
 * @returns {Object} é©—è­‰çµæœ
 */
export function validatePracticeParams(params) {
  const errors = [];
  
  if (!params.subjectId || typeof params.subjectId !== 'number') {
    errors.push('subjectId å¿…é ˆæ˜¯æ•¸å­—');
  }
  
  const validModes = ['topic', 'comprehensive', 'quick'];
  if (!params.mode || !validModes.includes(params.mode)) {
    errors.push(`mode å¿…é ˆæ˜¯ä»¥ä¸‹ä¹‹ä¸€: ${validModes.join(', ')}`);
  }
  
  if (params.mode === 'topic' && (!params.topicId || typeof params.topicId !== 'number')) {
    errors.push('topic æ¨¡å¼å¿…é ˆæä¾› topicId');
  }
  
  if (params.questionCount && 
      (typeof params.questionCount !== 'number' || params.questionCount <= 0)) {
    errors.push('questionCount å¿…é ˆæ˜¯å¤§æ–¼0çš„æ•¸å­—');
  }
  
  return {
    isValid: errors.length === 0,
    errors
  };
}
```

### 4. æ¸¬è©¦è¦æ ¼

#### å–®å…ƒæ¸¬è©¦è¦æ ¼
```javascript
// tests/unit/stores/practice.store.test.js
import { describe, test, expect, beforeEach } from 'vitest';
import { setActivePinia, createPinia } from 'pinia';
import { usePracticeStore } from '@/stores/practice.store';

describe('Practice Store', () => {
  beforeEach(() => {
    setActivePinia(createPinia());
  });
  
  test('æ‡‰è©²èƒ½æˆåŠŸé–‹å§‹ç·´ç¿’æœƒè©±', async () => {
    const store = usePracticeStore();
    
    const session = await store.startPracticeSession({
      subjectId: 1,
      mode: 'quick',
      questionCount: 10
    });
    
    expect(session).toBeDefined();
    expect(session.subjectId).toBe(1);
    expect(session.mode).toBe('quick');
    expect(session.questions).toHaveLength(10);
    expect(store.currentSession).toBe(session);
  });
  
  test('æäº¤ç­”æ¡ˆæ‡‰è©²æ›´æ–°æœƒè©±ç‹€æ…‹', async () => {
    const store = usePracticeStore();
    
    // å…ˆé–‹å§‹æœƒè©±
    await store.startPracticeSession({
      subjectId: 1,
      mode: 'quick',
      questionCount: 5
    });
    
    // æäº¤ç­”æ¡ˆ
    const result = await store.submitAnswer({
      questionId: store.currentSession.questions[0].id,
      answer: 0
    });
    
    expect(result).toHaveProperty('isCorrect');
    expect(store.currentSession.userAnswers.size).toBe(1);
  });
  
  test('çµæŸæœƒè©±æ‡‰è©²è¨ˆç®—ç¸½åˆ†', async () => {
    const store = usePracticeStore();
    
    // é–‹å§‹æœƒè©±ä¸¦æäº¤ä¸€äº›ç­”æ¡ˆ
    await store.startPracticeSession({
      subjectId: 1,
      mode: 'quick',
      questionCount: 3
    });
    
    // æäº¤æ‰€æœ‰ç­”æ¡ˆ
    for (const question of store.currentSession.questions) {
      await store.submitAnswer({
        questionId: question.id,
        answer: 0
      });
    }
    
    // çµæŸæœƒè©±
    const finalResult = await store.endPracticeSession();
    
    expect(finalResult).toHaveProperty('score');
    expect(finalResult.totalQuestions).toBe(3);
    expect(store.currentSession).toBeNull();
    expect(store.sessionHistory).toHaveLength(1);
  });
});

// tests/unit/utils/scoring-system.test.js
import { describe, test, expect } from 'vitest';
import { checkAnswer, calculateTotalScore } from '@/utils/scoring-system';

describe('Scoring System', () => {
  describe('å–®é¸é¡Œè©•åˆ†', () => {
    test('æ­£ç¢ºç­”æ¡ˆæ‡‰è©²è¿”å›æ­£ç¢ºçµæœ', () => {
      const question = {
        type: 'single',
        answer: 0,
        options: ['é¸é …A', 'é¸é …B', 'é¸é …C']
      };
      
      const result = checkAnswer(question, 0);
      
      expect(result.isCorrect).toBe(true);
      expect(result.score).toBe(1);
    });
    
    test('éŒ¯èª¤ç­”æ¡ˆæ‡‰è©²è¿”å›éŒ¯èª¤çµæœ', () => {
      const question = {
        type: 'single',
        answer: 0,
        options: ['é¸é …A', 'é¸é …B', 'é¸é …C']
      };
      
      const result = checkAnswer(question, 1);
      
      expect(result.isCorrect).toBe(false);
      expect(result.score).toBe(0);
    });
  });
  
  describe('ç¸½åˆ†è¨ˆç®—', () => {
    test('æ‡‰è©²æ­£ç¢ºè¨ˆç®—ç¸½åˆ†', () => {
      const results = [
        { isCorrect: true, score: 1 },
        { isCorrect: false, score: 0 },
        { isCorrect: true, score: 1 },
        { isCorrect: true, score: 1 }
      ];
      
      const total = calculateTotalScore(results);
      
      expect(total.totalQuestions).toBe(4);
      expect(total.correctAnswers).toBe(3);
      expect(total.score).toBe(75);
      expect(total.wrongAnswers).toBe(1);
    });
  });
});
```

## ğŸš€ é–‹ç™¼æµç¨‹

### 1. ç’°å¢ƒè¨­ç½®
```bash
# å…‹éš†é …ç›®
git clone https://github.com/cct08311github/geography-review-website.git
cd geography-review-website

# å®‰è£ä¾è³´
npm install

# å•Ÿå‹•é–‹ç™¼æœå‹™å™¨
npm run dev

# é‹è¡Œæ¸¬è©¦
npm run test

# æ§‹å»ºç”Ÿç”¢ç‰ˆæœ¬
npm run build
```

### 2. ä»£ç¢¼è¦ç¯„
- ä½¿ç”¨ ESLint + Prettier é€²è¡Œä»£ç¢¼æ ¼å¼åŒ–
- éµå¾ª Vue.js é¢¨æ ¼æŒ‡å—
- çµ„ä»¶ä½¿ç”¨ Composition API + `<script setup>`
- æ‰€æœ‰å°å‡ºå‡½æ•¸å¿…é ˆæœ‰ JSDoc è¨»é‡‹

### 3. æäº¤è¦ç¯„
```
feat: æ–°å¢ç§‘ç›®ç·´ç¿’åŠŸèƒ½
fix: ä¿®å¾©é¡Œç›®åŠ è¼‰å•é¡Œ
docs: æ›´æ–°APIæ–‡æª”
test: æ·»åŠ ç·´ç¿’æœƒè©±æ¸¬è©¦
refactor: é‡æ§‹è©•åˆ†ç³»çµ±
chore: æ›´æ–°ä¾è³´åŒ…
```

### 4. æ¸¬è©¦è¦æ±‚
- æ‰€æœ‰ Store å¿…é ˆæœ‰å–®å…ƒæ¸¬è©¦
- æ ¸å¿ƒå·¥å…·å‡½æ•¸å¿…é ˆæœ‰å–®å…ƒæ¸¬è©¦
- çµ„ä»¶å¿…é ˆæœ‰åŸºæœ¬çš„æ¸²æŸ“æ¸¬è©¦
- é›†æˆæ¸¬è©¦è¦†è“‹ä¸»è¦ç”¨æˆ¶æµç¨‹
- æ¸¬è©¦è¦†è“‹ç‡ç›®æ¨™ > 80%

## ğŸ“¦ æ•¸æ“šçµæ§‹

### é¡Œç›®æ•¸æ“šç¤ºä¾‹
```javascript
{
  id: 1,
  subjectId: 5,           // ç¤¾æœƒç§‘
  topicId: 1,             // åœ°ç†ä¸»é¡Œ
  type: 'single',         // å–®é¸é¡Œ
  question: 'å°ç£æœ€é«˜çš„å±±æ˜¯å“ªä¸€åº§ï¼Ÿ',
  options: ['ç‰å±±', 'é˜¿é‡Œå±±', 'é™½æ˜å±±', 'åˆæ­¡å±±'],
  answer: 0,              // æ­£ç¢ºç­”æ¡ˆç´¢å¼•
  explanation: 'ç‰å±±æµ·æ‹”3952å…¬å°ºï¼Œæ˜¯å°ç£ä¹Ÿæ˜¯æ±åŒ—äºæœ€é«˜å³°ã€‚',
  difficulty: 'easy',
  tags: ['å°ç£åœ°ç†', 'å±±è„ˆ'],
  createdAt: '2026-02-14T00:00:00Z',
  updatedAt: '2026-02-14T00:00:00Z'
}
```

### ç·´ç¿’æœƒè©±ç¤ºä¾‹
```javascript
{
  id: 'session_abc123',
  subjectId: 5,
  mode: 'quick',
  questions: [
    { id: 1, /* é¡Œç›®è©³æƒ… */ },
    { id: 2, /* é¡Œç›®è©³æƒ… */ },
    // ... å…±10é¡Œ
  ],
  currentQuestionIndex: 3,
  userAnswers: new Map([
    [1, 0],    // ç¬¬1é¡Œé¸æ“‡é¸é …A
    [2, 2],    // ç¬¬2é¡Œé¸æ“‡é¸é …C
    [3, 1]     // ç¬¬3é¡Œé¸æ“‡é¸é …B
  ]),
  startTime: '2026-02-14T08:00:00Z',
  completed: false
}
```

## ğŸ”’ å®‰å…¨æ€§è€ƒæ…®

### 1. è¼¸å…¥é©—è­‰
- æ‰€æœ‰ç”¨æˆ¶è¼¸å…¥å¿…é ˆé©—è­‰
- é˜²æ­¢XSSæ”»æ“Šï¼ˆä½¿ç”¨Vueçš„æ–‡æœ¬æ’å€¼ï¼‰
- é©—è­‰é¡Œç›®æ•¸æ“šå®Œæ•´æ€§

### 2. æ•¸æ“šå®‰å…¨
- LocalStorage æ•¸æ“šåŠ å¯†ï¼ˆå¯é¸ï¼‰
- é˜²æ­¢æ•¸æ“šç¯¡æ”¹
- å®šæœŸå‚™ä»½æé†’

### 3. æ€§èƒ½å®‰å…¨
- é˜²æ­¢å…§å­˜æ´©æ¼
- é™åˆ¶é¡Œç›®ç·©å­˜å¤§å°
- å„ªåŒ–æ¸²æŸ“æ€§èƒ½

## ğŸ“ˆ æ€§èƒ½å„ªåŒ–

### 1. åŠ è¼‰å„ªåŒ–
- é¡Œç›®æ•¸æ“šæ‡¶åŠ è¼‰
- åœ–ç‰‡å’Œè³‡æºå»¶é²åŠ è¼‰
- ä½¿ç”¨Web Workerè™•ç†è¤‡é›œè¨ˆç®—

### 2. æ¸²æŸ“å„ªåŒ–
- è™›æ“¬æ»¾å‹•é•·åˆ—è¡¨
- çµ„ä»¶æ‡¶åŠ è¼‰
- é¿å…ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“

### 3. å­˜å„²å„ªåŒ–
- LRUç·©å­˜ç­–ç•¥
- æ•¸æ“šå£“ç¸®å­˜å„²
- å®šæœŸæ¸…ç†éæœŸæ•¸æ“š

## ğŸ”„ éƒ¨ç½²æµç¨‹

### 1. é–‹ç™¼ç’°å¢ƒ
```bash
# æœ¬åœ°é–‹ç™¼
npm run dev

# è¨ªå• http://localhost:5173
```

### 2. æ¸¬è©¦ç’°å¢ƒ
```bash
# é‹è¡Œæ‰€æœ‰æ¸¬è©¦
npm run test

# æ§‹å»ºæ¸¬è©¦ç‰ˆæœ¬
npm run build:test
```

### 3. ç”Ÿç”¢ç’°å¢ƒ
```bash
# æ§‹å»ºç”Ÿç”¢ç‰ˆæœ¬
npm run build

# éƒ¨ç½²åˆ°GitHub Pages
npm run deploy
```

### 4. ç›£æ§èˆ‡ç¶­è­·
- ä½¿ç”¨GitHub Actionsè‡ªå‹•åŒ–éƒ¨ç½²
- è¨­ç½®éŒ¯èª¤ç›£æ§ï¼ˆå¯é¸ï¼‰
- å®šæœŸæ›´æ–°ä¾è³´åŒ…

## ğŸ¯ é©—æ”¶æ¨™æº–

### åŠŸèƒ½é©—æ”¶
- [ ] 5å¤§ç§‘ç›®ç·´ç¿’åŠŸèƒ½æ­£å¸¸
- [ ] ä¸‰ç¨®ç·´ç¿’æ¨¡å¼å®Œæ•´å¯¦ç¾
- [ ] éŒ¯é¡Œæœ¬åŠŸèƒ½æ­£å¸¸
- [ ] å­¸ç¿’é€²åº¦è¿½è¹¤æº–ç¢º

### è³ªé‡é©—æ”¶
- [ ] æ¸¬è©¦è¦†è“‹ç‡ > 80%
- [ ] ç„¡åš´é‡éŒ¯èª¤
- [ ] æ€§èƒ½æŒ‡æ¨™é”æ¨™
- [ ] ä»£ç¢¼å¯©æŸ¥é€šé

### ç”¨æˆ¶é«”é©—é©—æ”¶
- [ ] ç•Œé¢éŸ¿æ‡‰è¿…é€Ÿ
- [ ] æ“ä½œæµç¨‹é †æš¢
- [ ] éŒ¯èª¤æç¤ºå‹å¥½
- [ ] ç§»å‹•ç«¯é©é…è‰¯å¥½

---

**æ–‡æª”ç‰ˆæœ¬**: 1.0  
**æœ€å¾Œæ›´æ–°**: 2026-02-14 08:00 UTC  
**ç‹€æ…‹**: âœ… å®Œæˆ - å¯ä¾›é–‹ç™¼åœ˜éšŠä½¿ç”¨